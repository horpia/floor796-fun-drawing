(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(i=o.key,a=void 0,a=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(i,"string"),"symbol"===t(a)?a:String(a)),o)}var i,a}function a(t,e,r){l(t,e),e.set(t,r)}function l(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function s(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,f(t,e,"get"))}function u(t,e,r){return function(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}(t,e),r}function c(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,f(t,e,"set"),r),r}function f(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var h=new WeakMap,L=new WeakMap,y=new WeakMap,v=new WeakMap,p=new WeakSet,d=function(){function t(){var e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(e=this,r=p),r.add(e),a(this,h,{writable:!0,value:[]}),a(this,L,{writable:!0,value:0}),a(this,y,{writable:!0,value:void 0}),a(this,v,{writable:!0,value:void 0}),c(this,h,t.generateColors()),function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(this,p,m).call(this),this.setColor(27)}var e,r,n;return e=t,n=[{key:"generateColors",value:function(){for(var e=[],r=0;r<12;r++){var n=30*r;120!==n&&e.push(u(t,t,b).call(t,n,.2,1),u(t,t,b).call(t,n,.4,1),u(t,t,b).call(t,n,.6,.9),u(t,t,b).call(t,n,.8,.6),u(t,t,b).call(t,n,.8,.4))}for(var o=8;o>=0;o--)e.push(u(t,t,b).call(t,0,0,o/8));return[].concat(e).reverse()}}],(r=[{key:"colors",get:function(){return s(this,h)}},{key:"currentColorIndex",get:function(){return s(this,L)}},{key:"setColor",value:function(t){c(this,L,t),s(this,y).style.fill="rgb("+s(this,h)[s(this,L)].join(", ")+")";var e=document.querySelector(".colors-bar > div.selected");e&&e.classList.remove("selected"),document.querySelector('.colors-bar > div[data-index="'.concat(t,'"]')).classList.add("selected")}},{key:"showColorsPalette",value:function(){s(this,v).hidden=!1}},{key:"closeColorsPalette",value:function(){s(this,v).hidden=!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m(){var t=this,o=document.querySelector('.button[data-role="color"]');c(this,y,o.querySelector("rect:last-of-type"));var i,a=[],l=s(this,h).length-1,u=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=n(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return l=t.done,t},e:function(t){s=!0,a=t},f:function(){try{l||null==r.return||r.return()}finally{if(s)throw a}}}}(r(s(this,h)).slice(1).reverse());try{for(u.s();!(i=u.n()).done;){var f=e(i.value,3),L=f[0],p=f[1],d=f[2];a.push('<div style="--color: rgb('.concat(L," ").concat(p," ").concat(d,')" data-index="').concat(l--,'"></div>'))}}catch(t){u.e(t)}finally{u.f()}var m=document.querySelector(".colors-popup");c(this,v,m),m.onclick=function(t){t.target===m&&(m.hidden=!0)};var b=document.querySelector(".colors-bar");b.innerHTML=a.join(""),b.onclick=function(e){e.target.hasAttribute("data-index")&&(t.setColor(parseInt(e.target.dataset.index,10)),m.hidden=!0)},o.onclick=function(){m.hidden=!1}}function b(t,e,r){var n=r*(1-e/2);if(e=n<1e-4||n>.998?0:(r-n)/Math.min(n,1-n),t=Math.max(0,Math.min(360,t)),n=Math.max(0,Math.min(1,n)),0===(e=Math.max(0,Math.min(1,e))))return[Math.round(255*n),Math.round(255*n),Math.round(255*n)];for(var o=n<.5?n*(1+e):n+e-n*e,i=2*n-o,a=[((t/=360)+1/3)%1,t,(t+2/3)%1],l=0;l<3;++l)a[l]=a[l]<1/6?i+6*(o-i)*a[l]:a[l]<.5?o:a[l]<2/3?i+6*(o-i)*(2/3-a[l]):i;return[Math.round(255*a[0]),Math.round(255*a[1]),Math.round(255*a[2])]}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,e)||k(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){if(t){if("string"==typeof t)return S(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(t,e):void 0}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==w(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===w(i)?i:String(i)),n)}var o,i}function E(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function M(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,O(t,e,"set"),r),r}function C(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,O(t,e,"get"))}function O(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var x=new WeakMap,T=new WeakMap,P=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,x,{writable:!0,value:new Map}),E(this,T,{writable:!0,value:1}),document.querySelectorAll('.button[data-role="size"]').forEach((function(t){var r=parseInt(t.dataset.size,10);C(e,x).set(r,t),t.addEventListener("click",(function(){return e.setSize(r)}))})),this.setSize(1)}var e,r,n;return e=t,(r=[{key:"size",get:function(){return C(this,T)}},{key:"setSize",value:function(t){if(C(this,x).has(t)){M(this,T,t);var e,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=k(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}(C(this,x).entries());try{for(r.s();!(e=r.n()).done;){var n=g(e.value,2),o=n[0];n[1].classList.toggle("button_checked",o===t)}}catch(t){r.e(t)}finally{r.f()}}}}])&&j(e.prototype,r),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),_=67,A=38,W=6,I=12,z=[.5,1,2,3,4],N=2,F="#ffffff",B="#000000",U="fun-drawing";function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function D(t){return function(t){if(Array.isArray(t))return K(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==R(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===R(i)?i:String(i)),n)}var o,i}function Y(t,e){G(t,e),e.add(t)}function Z(t,e,r){G(t,e),e.set(t,r)}function G(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function H(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function X(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,V(t,e,"get"))}function J(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,V(t,e,"set"),r),r}function V(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var $=new WeakMap,Q=new WeakMap,tt=new WeakMap,et=new WeakMap,rt=new WeakMap,nt=new WeakMap,ot=new WeakMap,it=new WeakMap,at=new WeakMap,lt=new WeakMap,st=new WeakMap,ut=new WeakMap,ct=new WeakMap,ft=new WeakMap,ht=new WeakMap,Lt=new WeakMap,yt=new WeakMap,vt=new WeakMap,pt=new WeakMap,dt=new WeakMap,mt=new WeakSet,bt=new WeakSet,wt=new WeakSet,gt=new WeakSet,kt=new WeakSet,St=new WeakSet,jt=function(){function t(e,r,n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Y(this,St),Y(this,kt),Y(this,gt),Y(this,wt),Y(this,bt),Y(this,mt),Z(this,$,{writable:!0,value:void 0}),Z(this,Q,{writable:!0,value:void 0}),Z(this,tt,{writable:!0,value:void 0}),Z(this,et,{writable:!0,value:void 0}),Z(this,rt,{writable:!0,value:void 0}),Z(this,nt,{writable:!0,value:void 0}),Z(this,ot,{writable:!0,value:void 0}),Z(this,it,{writable:!0,value:void 0}),Z(this,at,{writable:!0,value:void 0}),Z(this,lt,{writable:!0,value:1}),Z(this,st,{writable:!0,value:0}),Z(this,ut,{writable:!0,value:0}),Z(this,ct,{writable:!0,value:void 0}),Z(this,ft,{writable:!0,value:null}),Z(this,ht,{writable:!0,value:new Map}),Z(this,Lt,{writable:!0,value:[0,0]}),Z(this,yt,{writable:!0,value:null}),Z(this,vt,{writable:!0,value:[0,0]}),Z(this,pt,{writable:!0,value:void 0}),Z(this,dt,{writable:!0,value:void 0}),J(this,$,e),J(this,Q,document.createElement("canvas")),J(this,rt,X(this,Q).getContext("2d")),J(this,et,document.createElement("canvas")),J(this,ot,X(this,et).getContext("2d")),J(this,tt,document.createElement("canvas")),X(this,tt).width=_,X(this,tt).height=A,J(this,nt,X(this,tt).getContext("2d")),J(this,it,r),J(this,at,n);var i=document.querySelector(".canvas-container");i.appendChild(X(this,Q)),i.appendChild(X(this,et)),H(this,bt,Mt).call(this,i),document.querySelector('.button[data-role="zoom-in"]').onclick=function(){return H(o,wt,Ct).call(o,1)},document.querySelector('.button[data-role="zoom-out"]').onclick=function(){return H(o,wt,Ct).call(o,-1)}}var e,r,n;return e=t,(r=[{key:"commitObserver",get:function(){return X(this,$)}},{key:"layers",get:function(){return X(this,it)}},{key:"palette",get:function(){return X(this,at)}},{key:"getPosition",value:function(){return[X(this,st),X(this,ut)]}},{key:"setPosition",value:function(t,e){var r=_>>1,n=A>>1;J(this,st,Math.max(Math.min(t,r*W),-r*W)),J(this,ut,Math.max(Math.min(e,n*W),-n*W)),J(this,ct,void 0),this.render(),H(this,mt,Et).call(this)}},{key:"getScale",value:function(){return X(this,lt)}},{key:"resizeToContainer",value:function(){var t=X(this,Q).parentElement;if(t){J(this,ct,void 0);for(var e=0,r=[X(this,Q),X(this,et)];e<r.length;e++){var n=r[e];n.width=t.offsetWidth*N,n.height=(t.offsetHeight-1)*N,n.style.width="".concat(t.offsetWidth,"px"),n.style.height="".concat(t.offsetHeight-1,"px")}}}},{key:"render",value:function(){var t=this;X(this,pt)&&cancelAnimationFrame(X(this,pt)),J(this,pt,requestAnimationFrame((function(){X(t,rt).clearRect(0,0,X(t,Q).width,X(t,Q).height),X(t,rt).imageSmoothingEnabled=!1,X(t,rt).webkitImageSmoothingEnabled=!1,X(t,rt).mozImageSmoothingEnabled=!1,H(t,gt,Ot).call(t),H(t,kt,xt).call(t)})))}},{key:"setTool",value:function(t){X(this,ft)!==t&&(X(this,ft)&&X(this,ft).unload(),X(this,ht).has(t)||X(this,ht).set(t,Math.max.apply(Math,[].concat(D(X(this,ht).values()),[0]))+1),J(this,ft,t),X(this,it).commitTransactions(),this.applySelectionTranslate(),this.render(),H(this,mt,Et).call(this))}},{key:"getTool",value:function(){return X(this,ft)}},{key:"setSelection",value:function(t,e,r,n){t=Math.max(0,Math.min(t,_)),r=Math.max(0,Math.min(r,_)),e=Math.max(0,Math.min(e,A)),n=Math.max(0,Math.min(n,A));var o=Math.min(t,r),i=Math.min(e,n),a=Math.max(t,r),l=Math.max(e,n);J(this,vt,[0,0]),J(this,yt,a-o<=1||l-i<=1?null:[o,i,a-o,l-i]),H(this,mt,Et).call(this)}},{key:"translateSelection",value:function(t,e){X(this,vt)[0]=t,X(this,vt)[1]=e,H(this,mt,Et).call(this)}},{key:"getSelection",value:function(){return X(this,yt)?[X(this,yt)[0],X(this,yt)[1],X(this,yt)[0]+X(this,yt)[2],X(this,yt)[1]+X(this,yt)[3]]:null}},{key:"applySelectionTranslate",value:function(){if(null!=X(this,yt)&&(0!==X(this,vt)[0]||0!==X(this,vt)[1])){var t=this.getSelection();this.setSelection(t[0]-X(this,vt)[0],t[1]-X(this,vt)[1],t[2]-X(this,vt)[0],t[3]-X(this,vt)[1])}}},{key:"getSelectionOffset",value:function(){return D(X(this,vt))}},{key:"reset",value:function(){J(this,st,0),J(this,ut,0),J(this,lt,1),J(this,yt,null),J(this,vt,[0,0]),X(this,it).reset(),this.render(),H(this,mt,Et).call(this)}},{key:"getState",value:function(){return{x:X(this,st),y:X(this,ut),scale:X(this,lt),tool:X(this,ht).get(X(this,ft)),selection:JSON.parse(JSON.stringify(X(this,yt))),selectionOffset:JSON.parse(JSON.stringify(X(this,vt))),layers:X(this,it).getState()}}},{key:"setState",value:function(t){J(this,ct,void 0),J(this,st,t.x),J(this,ut,t.y),J(this,lt,Math.max(.5,t.scale)),J(this,yt,JSON.parse(JSON.stringify(t.selection))),J(this,vt,JSON.parse(JSON.stringify(t.selectionOffset))),X(this,it).setState(t.layers),this.render(),H(this,mt,Et).call(this)}}])&&q(e.prototype,r),n&&q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Et(){var t=this;X(this,dt)&&cancelAnimationFrame(X(this,dt)),J(this,dt,requestAnimationFrame((function(){var e=H(t,St,Tt).call(t),r=e.x,n=e.y,o=e.pxSize;X(t,ot).clearRect(0,0,X(t,et).width,X(t,et).height),X(t,ft)&&(X(t,ot).save(),X(t,ft).renderCursor(X(t,ot),r,n,X(t,Lt)[0],X(t,Lt)[1],o),X(t,ot).restore()),X(t,yt)&&(X(t,ot).save(),X(t,ot).lineWidth=2,X(t,ot).beginPath(),X(t,ot).rect(r+X(t,yt)[0]*o-X(t,vt)[0]*o,n+X(t,yt)[1]*o-X(t,vt)[1]*o,X(t,yt)[2]*o,X(t,yt)[3]*o),X(t,ot).setLineDash([10,10]),X(t,ot).strokeStyle=F,X(t,ot).stroke(),X(t,ot).strokeStyle=B,X(t,ot).lineDashOffset=10,X(t,ot).stroke(),X(t,ot).restore())})))}function Mt(t){var e=this,r={canvasX:0,canvasY:0,col:0,row:0},n={canvasX:0,canvasY:0,col:0,row:0},o=!1,i=function(r){var n,o;window.TouchEvent&&r instanceof TouchEvent?(n=r.touches[0].clientX,o=r.touches[0].clientY):(n=r.clientX,o=r.clientY);var i=H(e,St,Tt).call(e);n+=t.scrollLeft,o+=t.scrollTop;var a=t.getBoundingClientRect(),l=a.left,s=a.top,u=n-(l+=t.scrollLeft),c=o-(s+=t.scrollTop);return{canvasX:u,canvasY:c,col:Math.floor((u*N-i.x)/i.pxSize),row:Math.floor((c*N-i.y)/i.pxSize)}},a=function(t){X(e,ft)&&(n=i(t),X(e,Lt)[0]=n.col,X(e,Lt)[1]=n.row,H(e,mt,Et).call(e),X(e,ft).handleMove(n.col,n.row,n.canvasX-r.canvasX,n.canvasY-r.canvasY))},l=function r(){o=!1,X(e,ft)&&X(e,ft).handleEnd(n.col,n.row,n.canvasX,n.canvasY),document.removeEventListener("mousemove",a,{capture:!0}),document.removeEventListener("mouseup",r,{capture:!0}),t.removeEventListener("touchmove",a),t.removeEventListener("touchend",r)};t.addEventListener("touchstart",(function(n){o=!0,n.preventDefault(),r=i(n),X(e,ft).handleStart(r.col,r.row,r.canvasX,r.canvasY),t.addEventListener("touchmove",a),t.addEventListener("touchend",l)})),t.addEventListener("wheel",(function(t){t.stopPropagation(),t.preventDefault(),0!==t.deltaY&&H(e,wt,Ct).call(e,t.deltaY>0?-1:1)})),document.addEventListener("mousemove",(function(t){X(e,ft)&&(n=i(t),X(e,Lt)[0]=n.col,X(e,Lt)[1]=n.row,H(e,mt,Et).call(e))})),t.addEventListener("mousedown",(function(t){o||(r=i(t),X(e,ft)&&X(e,ft).handleStart(r.col,r.row,r.canvasX,r.canvasY),document.addEventListener("mousemove",a,{capture:!0}),document.addEventListener("mouseup",l,{capture:!0}))}))}function Ct(t){J(this,lt,z[Math.max(0,Math.min(z.length-1,z.indexOf(X(this,lt))+t))]),J(this,ct,void 0),this.render(),H(this,mt,Et).call(this)}function Ot(){var t=H(this,St,Tt).call(this),e=t.x,r=t.y,n=t.width,o=t.height;X(this,rt).save();var i=X(this,it).getImageData(X(this,at));X(this,nt).putImageData(i,0,0),X(this,rt).drawImage(X(this,tt),e,r,n,o),X(this,rt).restore()}function xt(){var t=H(this,St,Tt).call(this),e=t.x,r=t.y,n=t.width,o=t.height,i=t.pxSize;X(this,rt).save(),X(this,rt).lineWidth=Math.min(1,X(this,lt)),X(this,rt).globalAlpha=.6,X(this,rt).strokeStyle="#555555",X(this,rt).beginPath();for(var a=0;a<=_;a++){var l=e+a*i;X(this,rt).moveTo(l,r),X(this,rt).lineTo(l,r+o)}for(var s=0;s<=A;s++){var u=r+s*i;X(this,rt).moveTo(e,u),X(this,rt).lineTo(e+n,u)}X(this,rt).stroke(),X(this,rt).restore()}function Tt(){if(X(this,ct))return X(this,ct);var t=W*X(this,lt)*N,e=_*t,r=A*t,n=X(this,Q).width>>1,o=X(this,Q).height>>1;return J(this,ct,{x:n-(e>>1)+Math.round(X(this,st)*X(this,lt)*N),y:o-(r>>1)+Math.round(X(this,ut)*X(this,lt)*N),width:e,height:r,pxSize:t}),X(this,ct)}function Pt(t){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(t)}function _t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,e)||Wt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Wt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function Wt(t,e){if(t){if("string"==typeof t)return It(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?It(t,e):void 0}}function It(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function zt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Pt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Pt(i)?i:String(i)),n)}var o,i}function Nt(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function Ft(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ut(t,e,"get"))}function Bt(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Ut(t,e,"set"),r),r}function Ut(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Rt=new WeakMap,Dt=new WeakMap,Kt=new WeakMap,qt=new WeakMap,Yt=new WeakMap,Zt=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Nt(this,Rt,{writable:!0,value:new Map}),Nt(this,Dt,{writable:!0,value:new Map}),Nt(this,Kt,{writable:!0,value:void 0}),Nt(this,qt,{writable:!0,value:document.querySelector(".canvas-container")}),Nt(this,Yt,{writable:!0,value:""}),Bt(this,Kt,e),document.querySelectorAll(".button[data-role]").forEach((function(t){Ft(r,Dt).set(t.dataset.role,t),t.addEventListener("click",(function(){return r.setTool(t.dataset.role)}))}))}var e,r,n;return e=t,(r=[{key:"bindTool",value:function(t,e){Ft(this,Rt).set(t,e)}},{key:"sync",value:function(){var t,e=Ft(this,Kt).getTool(),r=At(Ft(this,Rt).entries());try{for(r.s();!(t=r.n()).done;){var n=_t(t.value,2),o=n[0],i=n[1];Ft(this,Dt).get(o).classList.toggle("button_checked",i===e),i===e&&(Ft(this,qt).dataset.tool=o,Bt(this,Yt,o))}}catch(t){r.e(t)}finally{r.f()}}},{key:"getTool",value:function(){return Ft(this,Yt)}},{key:"setTool",value:function(t){if(Ft(this,Rt).has(t)&&Ft(this,Yt)!==t){Bt(this,Yt,t);var e,r=At(Ft(this,Dt).entries());try{for(r.s();!(e=r.n()).done;){var n=_t(e.value,2),o=n[0];n[1].classList.toggle("button_checked",o===t)}}catch(t){r.e(t)}finally{r.f()}Ft(this,Kt).setTool(Ft(this,Rt).get(t)),Ft(this,qt).dataset.tool=t}}}])&&zt(e.prototype,r),n&&zt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Gt(t){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(t)}function Ht(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,e)||Jt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(t){return function(t){if(Array.isArray(t))return Vt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Jt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(t,e){if(t){if("string"==typeof t)return Vt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vt(t,e):void 0}}function Vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,re(n.key),n)}}function Qt(t,e){ee(t,e),e.add(t)}function te(t,e,r){ee(t,e),e.set(t,r)}function ee(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function re(t){var e=function(t,e){if("object"!==Gt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Gt(e)?e:String(e)}function ne(t,e,r){return function(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}(t,e),r}function oe(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function ie(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,le(t,e,"get"))}function ae(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,le(t,e,"set"),r),r}function le(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var se=0,ue=new WeakMap,ce=new WeakMap,fe=new WeakMap,he=new WeakMap,Le=new WeakMap,ye=new WeakMap,ve=new WeakMap,pe=new WeakSet,de=new WeakSet,me=function(){function t(e,r){var n,o,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Qt(this,de),Qt(this,pe),n=this,i="",(o=re(o="name"))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,te(this,ue,{writable:!0,value:void 0}),te(this,ce,{writable:!0,value:void 0}),te(this,fe,{writable:!0,value:void 0}),te(this,he,{writable:!0,value:null}),te(this,Le,{writable:!0,value:[0,0]}),te(this,ye,{writable:!0,value:[]}),te(this,ve,{writable:!0,value:!0}),ae(this,ue,e),ae(this,ce,Date.now()+"."+Math.ceil(1e5*Math.random())+"."+ ++se),this.name=r,ae(this,fe,new Array(I).fill(null))}var e,r,n;return e=t,r=[{key:"id",get:function(){return ie(this,ce)}},{key:"isVisible",get:function(){return ie(this,ve)}},{key:"setVisibility",value:function(t){ae(this,ve,t)}},{key:"addObserver",value:function(t){ie(this,ye).push(t)}},{key:"createBlankKeyframe",value:function(t){(ie(this,he)||ie(this,fe))[t]=new Array(A).fill(null).map((function(t){return new Array(_).fill(0)})),ie(this,he)||(oe(this,de,ge).call(this),ie(this,ue).commit())}},{key:"createKeyframe",value:function(t){var e=ie(this,he)||ie(this,fe);if(!e[t])if(ie(this,he))this.createBlankKeyframe(t);else{var r=oe(this,pe,we).call(this,t);r<0?this.createBlankKeyframe(t):("structuredClone"in window?e[t]=structuredClone(e[r]):e[t]=JSON.parse(JSON.stringify(e[r])),ie(this,he)||oe(this,de,ge).call(this))}}},{key:"insertFrame",value:function(t){if(t===I-1)return!1;var e=this.getFramesStatus();return e[e.length-1]>1?(alert("ru"===floor796.detectUserLanguage()?"В таймлайне текущего слоя нет места для вставки кадра":"There is no space in the timeline of the current layer to insert a frame"),!1):(ie(this,fe).splice(t+1,0,null),ie(this,fe).pop(),ie(this,he)||(oe(this,de,ge).call(this),ie(this,ue).commit()),!0)}},{key:"removeFrame",value:function(t){ie(this,fe)[t]?(ie(this,fe)[t]=null,ie(this,he)&&(ie(this,he)[t]=null)):(ie(this,fe).splice(t,1),ie(this,fe).push(null),ie(this,he)&&(ie(this,he).splice(t,1),ie(this,he).push(null))),ie(this,he)||(oe(this,de,ge).call(this),ie(this,ue).commit())}},{key:"getFramesStatus",value:function(){for(var t=[],e=!1,r=function(t){for(var e=0;e<A;e++)for(var r=t[e],n=0;n<_;n++)if(0!==r[n])return!0;return!1},n=0;n<I;n++){var o=ie(this,fe)[n];null!==o?r(o)||ie(this,he)&&ie(this,he)[n]&&r(ie(this,he)[n])?(e=!0,t.push(3)):(e=!1,t.push(2)):t.push(e?1:0)}return t}},{key:"hasTransaction",value:function(){return null!==ie(this,he)}},{key:"startTransaction",value:function(){ae(this,he,new Array(I).fill(null))}},{key:"startTransactionFromSelection",value:function(t,e){ie(this,fe)[t]||this.createKeyframe(t),ae(this,Le,[0,0]),ae(this,he,new Array(I).fill(null)),this.createBlankKeyframe(t);for(var r=ie(this,fe)[t],n=ie(this,he)[t],o=e[1];o<e[3];o++)for(var i=r[o],a=e[0];a<e[2];a++)n[o][a]=i[a],r[o][a]=0}},{key:"startTransactionFromBuffer",value:function(t,e){ae(this,Le,[0,0]),ae(this,he,new Array(I).fill(null)),ie(this,fe)[t]||this.createKeyframe(t),this.createBlankKeyframe(t),ie(this,he)[t]=JSON.parse(JSON.stringify(e))}},{key:"translateTransaction",value:function(t,e){ie(this,Le)[0]=t,ie(this,Le)[1]=e}},{key:"getTransactionOffset",value:function(){return Xt(ie(this,Le))}},{key:"commitTransaction",value:function(){if(ie(this,he)){var t=ie(this,he);ae(this,he,null);for(var e=0;e<I;e++)if(t[e]){ie(this,fe)[e]||this.createKeyframe(e);for(var r=t[e],n=ie(this,fe)[e],o=0;o<A;o++){var i=o+ie(this,Le)[1];if(!(i<0||i>=A))for(var a=r[i],l=0;l<_;l++){var s=l+ie(this,Le)[0];s<0||s>=_||0!==a[s]&&(n[o][l]=a[s])}}}ie(this,Le)[0]=0,ie(this,Le)[1]=0,oe(this,de,ge).call(this),ie(this,ue).commit()}}},{key:"getPixels",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=ie(this,he)||ie(this,fe);if(!r[t]){if(!e)return null;this.createKeyframe(t)}return r[t]}},{key:"getPixel",value:function(t,e,r){if(ie(this,he)&&ie(this,he)[t]){var n=ie(this,he)[t][r+ie(this,Le)[1]][e+ie(this,Le)[0]];if(0!==n)return n}return(t=oe(this,pe,we).call(this,t))<0?0:ie(this,fe)[t][r][e]}},{key:"setPixels",value:function(t,e){var r=ie(this,he)||ie(this,fe);r[t]||this.createKeyframe(t),r[t]=e}},{key:"putPixel",value:function(t,e,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(ie(this,he)&&(r+=ie(this,Le)[0],n+=ie(this,Le)[1]),r>=_||n>=A||r<0||n<0)return!1;var a=ie(this,he)||ie(this,fe);a[t]||this.createKeyframe(t);for(var l=a[t],s=n- --o;s<=n+o;s++)for(var u=r-o;u<=r+o;u++)u>=_||s>=A||u<0||s<0||null!==i&&(u>=i[2]||s>=i[3]||u<i[0]||s<i[1])||(l[s][u]=e);return!0}},{key:"clearRect",value:function(t,e,r,n,o){e=Math.max(0,Math.min(e,n,_)),r=Math.max(0,Math.min(r,o,A)),n=Math.min(_,Math.max(e,n,0)),o=Math.min(A,Math.max(r,o,0));var i=ie(this,he)||ie(this,fe);if(i[t])for(var a=r;a<o;a++)for(var l=i[t][a],s=e;s<n;s++)l[s]=0}},{key:"getImageData",value:function(t,e){var r=new ImageData(_,A);return this.mergeImageData(r,t,e),r}},{key:"clone",value:function(e){var r=new t(ie(this,ue),e);return ae(r,fe,JSON.parse(JSON.stringify(ie(this,fe)))),r}},{key:"mergeLayer",value:function(t){this.commitTransaction();for(var e=ie(t,fe),r=ie(this,fe),n=0;n<I;n++)null!==e[n]&&null===r[n]&&this.createKeyframe(n);for(var o=0;o<I;o++)if(null!==e[o]||null!==r[o]){var i,a=void 0,l=oe(t,pe,we).call(t,o);if(-1!==l){i=e[l],a=r[o];for(var s=0;s<A;s++)for(var u=i[s],c=0;c<_;c++)0!==u[c]&&(a[s][c]=u[c])}}}},{key:"mergeImageData",value:function(e,r,n){var o=oe(this,pe,we).call(this,r);o>=0&&ne(t,t,be).call(t,e,ie(this,fe)[o],n,0,0),ie(this,he)&&ie(this,he)[r]&&ne(t,t,be).call(t,e,ie(this,he)[r],n,ie(this,Le)[0],ie(this,Le)[1])}},{key:"getState",value:function(){return{id:ie(this,ce),name:this.name,frames:JSON.parse(JSON.stringify(ie(this,fe))),transaction:JSON.parse(JSON.stringify(ie(this,he))),transactionOffset:JSON.parse(JSON.stringify(ie(this,Le))),visible:ie(this,ve)}}},{key:"setState",value:function(t){ae(this,ce,t.id),this.name=t.name,ae(this,fe,JSON.parse(JSON.stringify(t.frames))),ae(this,he,JSON.parse(JSON.stringify(t.transaction))),ae(this,Le,JSON.parse(JSON.stringify(t.transactionOffset))),ae(this,ve,void 0===t.visible||t.visible)}}],r&&$t(e.prototype,r),n&&$t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function be(t,e,r,n,o){for(var i=t.data,a=0,l=0;l<A;l++){var s=l+o;if(s<0||s>=A)a+=4*_;else for(var u=e[s],c=0;c<_;c++){var f=c+n;if(f<0||f>=_)a+=4;else if(0!==u[f]){var h=Ht(r[u[f]],3),L=h[0],y=h[1],v=h[2];i[a++]=L,i[a++]=y,i[a++]=v,i[a++]=255}else a+=4}}}function we(t){for(var e=t;e>=0;e--)if(null!==ie(this,fe)[e])return e;return-1}function ge(){ie(this,ye).map((function(t){return t()}))}function ke(t){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(t)}function Se(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return je(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return je(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function je(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==ke(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===ke(i)?i:String(i)),n)}var o,i}function Me(t,e,r){Ce(t,e),e.set(t,r)}function Ce(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Oe(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function xe(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Pe(t,e,"get"))}function Te(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Pe(t,e,"set"),r),r}function Pe(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var _e=new WeakMap,Ae=new WeakMap,We=new WeakMap,Ie=new WeakMap,ze=new WeakSet,Ne=function(){function t(e){var r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ce(r=this,n=ze),n.add(r),Me(this,_e,{writable:!0,value:void 0}),Me(this,Ae,{writable:!0,value:[]}),Me(this,We,{writable:!0,value:0}),Me(this,Ie,{writable:!0,value:0}),Te(this,_e,e),xe(this,Ae).push(new me(xe(this,_e),Oe(this,ze,Fe).call(this)))}var e,r,n;return e=t,(r=[{key:"currentLayer",get:function(){return xe(this,Ae)[xe(this,We)]}},{key:"currentLayerIndex",get:function(){return xe(this,We)}},{key:"currentFrame",get:function(){return xe(this,Ie)}},{key:"layers",get:function(){return xe(this,Ae)}},{key:"setCurrentFrame",value:function(t){t=Math.max(0,Math.min(I-1,t)),xe(this,Ie)!==t&&(this.commitTransactions(),Te(this,Ie,t))}},{key:"setLayersOrder",value:function(t){this.commitTransactions();var e=this.currentLayer;xe(this,Ae).sort((function(e,r){return t.indexOf(e)-t.indexOf(r)})),Te(this,We,xe(this,Ae).indexOf(e)),xe(this,_e).commit()}},{key:"setCurrentLayer",value:function(t){xe(this,We)!==t&&(this.commitTransactions(),Te(this,We,Math.max(0,Math.min(xe(this,Ae).length-1,t))))}},{key:"insertNewLayer",value:function(t){this.commitTransactions(),xe(this,Ae).splice(t,0,new me(xe(this,_e),Oe(this,ze,Fe).call(this))),Te(this,We,t),xe(this,_e).commit()}},{key:"duplicateSelectedLayer",value:function(){return this.commitTransactions(),xe(this,Ae).splice(xe(this,We),0,this.currentLayer.clone(Oe(this,ze,Fe).call(this))),xe(this,_e).commit(),!0}},{key:"mergeSelectedLayer",value:function(){return this.commitTransactions(),xe(this,We)===xe(this,Ae).length-1?(alert("ru"===floor796.detectUserLanguage()?"Для объединения слоев необходимо наличие слоя под текущим выделенным":"To merge layers, you must have a layer below the current selection"),!1):(xe(this,Ae)[xe(this,We)+1].mergeLayer(xe(this,Ae)[xe(this,We)]),this.removeSelectedLayer(),xe(this,_e).commit(),!0)}},{key:"removeSelectedLayer",value:function(){var t;this.commitTransactions(),xe(this,Ae).splice(xe(this,We),1),xe(this,We)===xe(this,Ae).length&&0!==xe(this,We)&&Te(this,We,(t=xe(this,We),--t)),0===xe(this,Ae).length&&xe(this,Ae).push(new me(xe(this,_e),Oe(this,ze,Fe).call(this))),xe(this,_e).commit()}},{key:"commitTransactions",value:function(){xe(this,Ae).forEach((function(t){return t.commitTransaction()}))}},{key:"getImageData",value:function(t){for(var e=null,r=xe(this,Ae).length-1;r>=0;r--)xe(this,Ae)[r].isVisible&&(null===e?e=xe(this,Ae)[r].getImageData(xe(this,Ie),t):xe(this,Ae)[r].mergeImageData(e,xe(this,Ie),t));return e||new ImageData(_,A)}},{key:"reset",value:function(){Te(this,Ae,[new me(xe(this,_e),"1")]),Te(this,Ie,0),Te(this,We,0)}},{key:"getState",value:function(){return this.commitTransactions(),{current:{frame:xe(this,Ie),layer:xe(this,We)},layers:xe(this,Ae).map((function(t){return t.getState()}))}}},{key:"setState",value:function(t){Te(this,Ie,t.current.frame),Te(this,We,t.current.layer);var e,r=new Map(xe(this,Ae).map((function(t){return[t.id,t]}))),n=[],o=Se(t.layers);try{for(o.s();!(e=o.n()).done;){var i=e.value,a=void 0;a=r.has(i.id)?r.get(i.id):new me(xe(this,_e),Oe(this,ze,Fe).call(this)),n.push(a),a.setState(i)}}catch(t){o.e(t)}finally{o.f()}Te(this,Ae,n)}}])&&Ee(e.prototype,r),n&&Ee(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Fe(){var t,e=0,r=Se(xe(this,Ae));try{for(r.s();!(t=r.n()).done;){var n=t.value;e=Math.max(e,parseInt(n.name,10))}}catch(t){r.e(t)}finally{r.f()}return"".concat(e+1)}function Be(t){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Be(t)}function Ue(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Be(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Be(i)?i:String(i)),n)}var o,i}var Re=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,(r=[{key:"handleStart",value:function(t,e,r,n){}},{key:"handleMove",value:function(t,e,r,n){}},{key:"handleEnd",value:function(t,e,r,n){}},{key:"renderCursor",value:function(t,e,r,n,o,i){t.strokeStyle=F,t.lineWidth=1,t.beginPath(),t.rect(e+n*i,r+o*i,i,i),t.stroke()}},{key:"unload",value:function(){}}])&&Ue(e.prototype,r),n&&Ue(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function De(t){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(t)}function Ke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==De(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==De(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===De(i)?i:String(i)),n)}var o,i}function qe(t,e){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qe(t,e)}function Ye(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ge(t);if(e){var o=Ge(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===De(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ze(t)}(this,r)}}function Ze(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ge(t){return Ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ge(t)}function He(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function Xe(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ve(t,e,"get"))}function Je(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Ve(t,e,"set"),r),r}function Ve(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var $e=new WeakMap,Qe=new WeakMap,tr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qe(t,e)}(i,t);var e,r,n,o=Ye(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),He(Ze(e=o.call(this)),$e,{writable:!0,value:void 0}),He(Ze(e),Qe,{writable:!0,value:[0,0]}),Je(Ze(e),$e,t),e}return e=i,(r=[{key:"handleStart",value:function(t,e,r,n){Je(this,Qe,Xe(this,$e).getPosition())}},{key:"handleMove",value:function(t,e,r,n){var o=Xe(this,$e).getScale();Xe(this,$e).setPosition(Xe(this,Qe)[0]+r/o,Xe(this,Qe)[1]+n/o)}}])&&Ke(e.prototype,r),n&&Ke(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Re);function er(t){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},er(t)}function rr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return nr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function or(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==er(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===er(i)?i:String(i)),n)}var o,i}function ir(t,e){return ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ir(t,e)}function ar(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=sr(t);if(e){var o=sr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===er(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return lr(t)}(this,r)}}function lr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sr(t){return sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sr(t)}function ur(t,e,r){cr(t,e),e.set(t,r)}function cr(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function fr(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function hr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,yr(t,e,"get"))}function Lr(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,yr(t,e,"set"),r),r}function yr(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var vr=new WeakMap,pr=new WeakMap,dr=new WeakMap,mr=new WeakMap,br=new WeakSet,wr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ir(t,e)}(i,t);var e,r,n,o=ar(i);function i(t,e,r){var n,a,l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this),cr(a=lr(n),l=br),l.add(a),ur(lr(n),vr,{writable:!0,value:void 0}),ur(lr(n),pr,{writable:!0,value:void 0}),ur(lr(n),dr,{writable:!0,value:void 0}),ur(lr(n),mr,{writable:!0,value:[0,0]}),Lr(lr(n),vr,t),Lr(lr(n),pr,e),Lr(lr(n),dr,r),n}return e=i,(r=[{key:"handleStart",value:function(t,e,r,n){hr(this,vr).layers.currentLayer.startTransaction(),Lr(this,mr,[t,e]),fr(this,br,gr).call(this,t,e),hr(this,vr).render()}},{key:"handleMove",value:function(t,e,r,n){var o=rr(hr(this,mr),2),i=o[0],a=o[1];Lr(this,mr,[t,e]);var l=Math.max(Math.abs(e-a),Math.abs(t-i));if(l<=1)return fr(this,br,gr).call(this,t,e),void hr(this,vr).render();for(var s=(t-i)/l,u=(e-a)/l,c=1;c<=l;c++)fr(this,br,gr).call(this,i+Math.round(s*c),a+Math.round(u*c));hr(this,vr).render()}},{key:"handleEnd",value:function(t,e,r,n){hr(this,vr).layers.currentLayer.commitTransaction(),hr(this,vr).render(),hr(this,vr).commitObserver.commit()}},{key:"renderCursor",value:function(t,e,r,n,o,i){t.strokeStyle=F,t.lineWidth=1,t.beginPath();var a=(hr(this,dr).size-1)*i;t.rect(e+n*i-a,r+o*i-a,i+2*a,i+2*a),t.stroke()}}])&&or(e.prototype,r),n&&or(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Re);function gr(t,e){hr(this,vr).layers.currentLayer.putPixel(hr(this,vr).layers.currentFrame,hr(this,pr).currentColorIndex,t,e,hr(this,dr).size,hr(this,vr).getSelection())}function kr(t){return kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kr(t)}function Sr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return jr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Er(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==kr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==kr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===kr(i)?i:String(i)),n)}var o,i}function Mr(t,e){return Mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mr(t,e)}function Cr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=xr(t);if(e){var o=xr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===kr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Or(t)}(this,r)}}function Or(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xr(t){return xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xr(t)}function Tr(t,e,r){Pr(t,e),e.set(t,r)}function Pr(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _r(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ir(t,e,"get"))}function Ar(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Wr(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Ir(t,e,"set"),r),r}function Ir(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var zr=new WeakMap,Nr=new WeakMap,Fr=new WeakMap,Br=new WeakSet,Ur=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mr(t,e)}(i,t);var e,r,n,o=Cr(i);function i(t,e){var r,n,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this),Pr(n=Or(r),a=Br),a.add(n),Tr(Or(r),zr,{writable:!0,value:void 0}),Tr(Or(r),Nr,{writable:!0,value:void 0}),Tr(Or(r),Fr,{writable:!0,value:[0,0]}),Wr(Or(r),zr,t),Wr(Or(r),Nr,e),r}return e=i,(r=[{key:"handleStart",value:function(t,e,r,n){Wr(this,Fr,[t,e]),Ar(this,Br,Rr).call(this,t,e),_r(this,zr).render()}},{key:"handleMove",value:function(t,e,r,n){var o=Sr(_r(this,Fr),2),i=o[0],a=o[1];Wr(this,Fr,[t,e]);var l=Math.max(Math.abs(e-a),Math.abs(t-i));if(l<=1)return Ar(this,Br,Rr).call(this,t,e),void _r(this,zr).render();for(var s=(t-i)/l,u=(e-a)/l,c=1;c<=l;c++)Ar(this,Br,Rr).call(this,i+Math.round(s*c),a+Math.round(u*c));_r(this,zr).render()}},{key:"handleEnd",value:function(t,e,r,n){_r(this,zr).layers.currentLayer.startTransaction(),_r(this,zr).layers.currentLayer.commitTransaction(),_r(this,zr).render(),_r(this,zr).commitObserver.commit()}},{key:"renderCursor",value:function(t,e,r,n,o,i){t.strokeStyle=F,t.lineWidth=1,t.beginPath();var a=(_r(this,Nr).size-1)*i;t.rect(e+n*i-a,r+o*i-a,i+2*a,i+2*a),t.stroke()}}])&&Er(e.prototype,r),n&&Er(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Re);function Rr(t,e){_r(this,zr).layers.currentLayer.putPixel(_r(this,zr).layers.currentFrame,0,t,e,_r(this,Nr).size,_r(this,zr).getSelection())}function Dr(t){return Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dr(t)}function Kr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return qr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Yr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Dr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Dr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Dr(i)?i:String(i)),n)}var o,i}function Zr(t,e){return Zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zr(t,e)}function Gr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Xr(t);if(e){var o=Xr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Dr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Hr(t)}(this,r)}}function Hr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xr(t){return Xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xr(t)}function Jr(t,e,r){Vr(t,e),e.set(t,r)}function Vr(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $r(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Qr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,en(t,e,"get"))}function tn(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,en(t,e,"set"),r),r}function en(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var rn=new WeakMap,nn=new WeakMap,on=new WeakMap,an=new WeakMap,ln=new WeakMap,sn=new WeakMap,un=new WeakSet,cn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zr(t,e)}(i,t);var e,r,n,o=Gr(i);function i(t,e,r){var n,a,l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this),Vr(a=Hr(n),l=un),l.add(a),Jr(Hr(n),rn,{writable:!0,value:void 0}),Jr(Hr(n),nn,{writable:!0,value:void 0}),Jr(Hr(n),on,{writable:!0,value:void 0}),Jr(Hr(n),an,{writable:!0,value:void 0}),Jr(Hr(n),ln,{writable:!0,value:void 0}),Jr(Hr(n),sn,{writable:!0,value:[0,0]}),tn(Hr(n),rn,t),tn(Hr(n),nn,e),tn(Hr(n),on,r),n}return e=i,(r=[{key:"handleStart",value:function(t,e,r,n){tn(this,an,Qr(this,rn).layers.currentLayer),Qr(this,an).startTransaction(),tn(this,ln,Qr(this,rn).layers.currentFrame),tn(this,sn,[t,e]),$r(this,un,fn).call(this,t,e)}},{key:"handleMove",value:function(t,e,r,n){$r(this,un,fn).call(this,t,e)}},{key:"handleEnd",value:function(t,e,r,n){Qr(this,an).commitTransaction(),Qr(this,rn).commitObserver.commit()}},{key:"renderCursor",value:function(t,e,r,n,o,i){t.strokeStyle=F,t.lineWidth=1,t.beginPath();var a=(Qr(this,on).size-1)*i;t.rect(e+n*i-a,r+o*i-a,i+2*a,i+2*a),t.stroke()}}])&&Yr(e.prototype,r),n&&Yr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Re);function fn(t,e){Qr(this,an).createBlankKeyframe(Qr(this,ln));var r=Kr(Qr(this,sn),2),n=r[0],o=r[1],i=Math.max(Math.abs(e-o),Math.abs(t-n));if(i<1)return Qr(this,an).putPixel(Qr(this,ln),Qr(this,nn).currentColorIndex,t,e,Qr(this,rn).getSelection()),void Qr(this,rn).render();for(var a=(t-n)/i,l=(e-o)/i,s=0;s<=i;s++)Qr(this,an).putPixel(Qr(this,ln),Qr(this,nn).currentColorIndex,n+Math.round(a*s),o+Math.round(l*s),Qr(this,on).size,Qr(this,rn).getSelection());Qr(this,rn).render()}function hn(t){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hn(t)}function Ln(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return yn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==hn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===hn(i)?i:String(i)),n)}var o,i}function pn(t,e){return pn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pn(t,e)}function dn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=bn(t);if(e){var o=bn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===hn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mn(t)}(this,r)}}function mn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bn(t){return bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bn(t)}function wn(t,e,r){gn(t,e),e.set(t,r)}function gn(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function kn(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Sn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,En(t,e,"get"))}function jn(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,En(t,e,"set"),r),r}function En(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Mn=new WeakMap,Cn=new WeakMap,On=new WeakMap,xn=new WeakMap,Tn=new WeakMap,Pn=new WeakMap,_n=new WeakSet,An=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pn(t,e)}(i,t);var e,r,n,o=dn(i);function i(t,e,r){var n,a,l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this),gn(a=mn(n),l=_n),l.add(a),wn(mn(n),Mn,{writable:!0,value:void 0}),wn(mn(n),Cn,{writable:!0,value:void 0}),wn(mn(n),On,{writable:!0,value:void 0}),wn(mn(n),xn,{writable:!0,value:void 0}),wn(mn(n),Tn,{writable:!0,value:void 0}),wn(mn(n),Pn,{writable:!0,value:[0,0]}),jn(mn(n),Mn,t),jn(mn(n),Cn,e),jn(mn(n),On,r),n}return e=i,(r=[{key:"handleStart",value:function(t,e,r,n){jn(this,xn,Sn(this,Mn).layers.currentLayer),Sn(this,xn).startTransaction(),jn(this,Tn,Sn(this,Mn).layers.currentFrame),jn(this,Pn,[t,e]),kn(this,_n,Wn).call(this,t,e)}},{key:"handleMove",value:function(t,e,r,n){kn(this,_n,Wn).call(this,t,e)}},{key:"handleEnd",value:function(t,e,r,n){Sn(this,xn).commitTransaction(),Sn(this,Mn).commitObserver.commit()}}])&&vn(e.prototype,r),n&&vn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Re);function Wn(t,e){Sn(this,xn).createBlankKeyframe(Sn(this,Tn));var r=Ln(Sn(this,Pn),2),n=r[0],o=r[1],i=Math.abs(t-n),a=Math.abs(e-o);if(Math.max(i,a)<1)return Sn(this,xn).putPixel(Sn(this,Tn),Sn(this,Cn).currentColorIndex,t,e,Sn(this,Mn).getSelection()),void Sn(this,Mn).render();for(var l=Math.PI/2/(2*Math.ceil(Math.hypot(i,a))),s=0,u=2*Math.PI;s<=u;s+=l){var c=Math.sin(s)*a,f=Math.cos(s)*i;Sn(this,xn).putPixel(Sn(this,Tn),Sn(this,Cn).currentColorIndex,n+Math.round(f),o+Math.round(c),Sn(this,On).size,Sn(this,Mn).getSelection())}Sn(this,Mn).render()}function In(t){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},In(t)}function zn(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Fn(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function Nn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,e)||Fn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fn(t,e){if(t){if("string"==typeof t)return Bn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bn(t,e):void 0}}function Bn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Un(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==In(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==In(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===In(i)?i:String(i)),n)}var o,i}function Rn(t,e){return Rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rn(t,e)}function Dn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=qn(t);if(e){var o=qn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===In(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Kn(t)}(this,r)}}function Kn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qn(t){return qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qn(t)}function Yn(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function Zn(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Hn(t,e,"get"))}function Gn(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Hn(t,e,"set"),r),r}function Hn(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Xn=new WeakMap,Jn=new WeakMap,Vn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rn(t,e)}(i,t);var e,r,n,o=Dn(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Yn(Kn(r=o.call(this)),Xn,{writable:!0,value:void 0}),Yn(Kn(r),Jn,{writable:!0,value:null}),Gn(Kn(r),Xn,t),Gn(Kn(r),Jn,e),r}return e=i,(r=[{key:"handleStart",value:function(t,e,r,n){if(!(t<0||e<0||t>=_||e>=A)){var o=Zn(this,Xn).layers.currentLayer.getPixels(Zn(this,Xn).layers.currentFrame,!0);if(null!==o){var i=Zn(this,Jn).currentColorIndex,a=o[e][t];if(a!==i){Zn(this,Xn).layers.currentLayer.startTransaction();var l=Zn(this,Xn).getSelection();if(null!==l){for(var s=l[1];s<l[3];s++)for(var u=l[0];u<l[2];u++)o[s][u]=i;return Zn(this,Xn).layers.currentLayer.commitTransaction(),Zn(this,Xn).render(),void Zn(this,Xn).commitObserver.commit()}var c=[[0,-1],[1,0],[0,1],[-1,0]],f=new Array(1e4);o[e][t]=i,f[0]=[e,t];for(var h=1;h>0;){var L,y=Nn(f[--h],2),v=y[0],p=y[1],d=zn(c);try{for(d.s();!(L=d.n()).done;){var m=Nn(L.value,2),b=m[0],w=m[1],g=p+b;if(!(g<0||g>=_)){var k=v+w;k<0||k>=A||o[k][g]===a&&(o[k][g]=i,f[h++]=[k,g])}}}catch(t){d.e(t)}finally{d.f()}}Zn(this,Xn).layers.currentLayer.commitTransaction(),Zn(this,Xn).render(),Zn(this,Xn).commitObserver.commit()}}}}}])&&Un(e.prototype,r),n&&Un(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Re);function $n(t){return $n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$n(t)}function Qn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return to(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return to(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function to(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function eo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==$n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==$n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===$n(i)?i:String(i)),n)}var o,i}function ro(t,e){return ro=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ro(t,e)}function no(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=io(t);if(e){var o=io(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===$n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return oo(t)}(this,r)}}function oo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function io(t){return io=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},io(t)}function ao(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function lo(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,uo(t,e,"get"))}function so(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,uo(t,e,"set"),r),r}function uo(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var co=new WeakMap,fo=new WeakMap,ho=new WeakMap,Lo=new WeakMap,yo=new WeakMap,vo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ro(t,e)}(i,t);var e,r,n,o=no(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),ao(oo(e=o.call(this)),co,{writable:!0,value:void 0}),ao(oo(e),fo,{writable:!0,value:void 0}),ao(oo(e),ho,{writable:!0,value:[0,0]}),ao(oo(e),Lo,{writable:!0,value:[0,0]}),ao(oo(e),yo,{writable:!0,value:[0,0]}),so(oo(e),co,t),e}return e=i,(r=[{key:"handleStart",value:function(t,e,r,n){var o=lo(this,co).getSelection(),i=lo(this,co).getSelectionOffset();if(o&&(t<o[0]-i[0]||e<o[1]-i[1]||t>=o[2]-i[0]||e>=o[3]-i[1])&&(lo(this,co).setSelection(0,0,0,0),lo(this,co).layers.commitTransactions()),so(this,ho,[t,e]),so(this,fo,lo(this,co).layers.currentLayer),so(this,Lo,lo(this,fo).getTransactionOffset()),so(this,yo,lo(this,co).getSelectionOffset()),!lo(this,fo).hasTransaction()){var a=lo(this,co).getSelection()||[0,0,_,A];lo(this,fo).startTransactionFromSelection(lo(this,co).layers.currentFrame,a),lo(this,co).render()}}},{key:"handleMove",value:function(t,e,r,n){var o=Qn(lo(this,ho),2),i=o[0],a=o[1];lo(this,fo).translateTransaction(lo(this,Lo)[0]+i-t,lo(this,Lo)[1]+a-e),lo(this,co).translateSelection(lo(this,yo)[0]+i-t,lo(this,yo)[1]+a-e),lo(this,co).render()}},{key:"unload",value:function(){lo(this,fo)&&lo(this,fo).hasTransaction()&&(lo(this,co).layers.commitTransactions(),lo(this,co).commitObserver.commit())}}])&&eo(e.prototype,r),n&&eo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Re);function po(t){return po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},po(t)}function mo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return bo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==po(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==po(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===po(i)?i:String(i)),n)}var o,i}function go(t,e){return go=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},go(t,e)}function ko(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=jo(t);if(e){var o=jo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===po(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return So(t)}(this,r)}}function So(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jo(t){return jo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jo(t)}function Eo(t,e,r){Mo(t,e),e.set(t,r)}function Mo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Co(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,To(t,e,"get"))}function Oo(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function xo(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,To(t,e,"set"),r),r}function To(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Po=new WeakMap,_o=new WeakMap,Ao=new WeakMap,Wo=new WeakMap,Io=new WeakSet,zo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&go(t,e)}(i,t);var e,r,n,o=ko(i);function i(t){var e,r,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this),Mo(r=So(e),n=Io),n.add(r),Eo(So(e),Po,{writable:!0,value:void 0}),Eo(So(e),_o,{writable:!0,value:[0,0]}),Eo(So(e),Ao,{writable:!0,value:document.querySelector(".canvas-container")}),Eo(So(e),Wo,{writable:!0,value:null}),xo(So(e),Po,t),e}return e=i,(r=[{key:"handleStart",value:function(t,e,r,n){if(Oo(this,Io,No).call(this,t,e))return xo(this,Wo,new vo(Co(this,Po))),void Co(this,Wo).handleStart(t,e,r,n);null!==Co(this,Po).getSelection()&&Co(this,Po).commitObserver.commit(),Co(this,Po).layers.commitTransactions(),xo(this,_o,[t,e]),Co(this,Po).setSelection(0,0,0,0)}},{key:"handleMove",value:function(t,e,r,n){if(Co(this,Wo))Co(this,Wo).handleMove(t,e,r,n);else{var o=mo(Co(this,_o),2),i=o[0],a=o[1];Co(this,Po).setSelection(i,a,t,e)}}},{key:"handleEnd",value:function(t,e,r,n){Co(this,Wo)&&Co(this,Wo).handleEnd(t,e,r,n),xo(this,Wo,null),Co(this,Po).applySelectionTranslate()}},{key:"renderCursor",value:function(t,e,r,n,o,i){Oo(this,Io,No).call(this,n,o)?Co(this,Ao).classList.add("cursor-move"):Co(this,Ao).classList.remove("cursor-move")}},{key:"unload",value:function(){Co(this,Ao).classList.remove("cursor-move")}}])&&wo(e.prototype,r),n&&wo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Re);function No(t,e){var r=Co(this,Po).getSelection();return r&&t>=r[0]&&e>=r[1]&&t<r[2]&&e<r[3]}function Fo(t){return Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fo(t)}function Bo(t){return function(t){if(Array.isArray(t))return Uo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Uo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uo(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ro(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Fo(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Fo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Fo(i)?i:String(i)),n)}var o,i}function Do(t,e,r){Ko(t,e),e.set(t,r)}function Ko(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qo(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Zo(t,e,"get"))}function Yo(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Zo(t,e,"set"),r),r}function Zo(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Go=new WeakMap,Ho=new WeakMap,Xo=new WeakMap,Jo=new WeakMap,Vo=new WeakSet,$o=function(){function t(e,r){var n,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ko(n=this,o=Vo),o.add(n),Do(this,Go,{writable:!0,value:void 0}),Do(this,Ho,{writable:!0,value:void 0}),Do(this,Xo,{writable:!0,value:null}),Do(this,Jo,{writable:!0,value:!1}),Yo(this,Go,e),Yo(this,Ho,r),document.querySelector('.button[data-role="copy"]').onclick=function(){return i.copy()},document.querySelector('.button[data-role="cut"]').onclick=function(){return i.cut()},document.querySelector('.button[data-role="paste"]').onclick=function(){return i.paste()}}var e,r,n;return e=t,r=[{key:"copy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=qo(this,Go).getSelection(),r=qo(this,Go).layers.currentLayer.getPixels(qo(this,Go).layers.currentFrame);if(!r)return alert("ru"===floor796.detectUserLanguage()?"Копировать можно только из ключевого кадра. Текущий кадр не ключевой":"You can only copy from a keyframe. The current frame is not a key"),!1;e?Yo(this,Jo,!1):(e=[0,0,_,A],Yo(this,Jo,!0)),Yo(this,Xo,new Array(A).fill(null).map((function(t){return new Array(_).fill(0)}))),t&&qo(this,Go).layers.currentLayer.startTransaction();for(var n=e[1];n<e[3];n++)for(var o=r[n],i=e[0];i<e[2];i++)qo(this,Xo)[n][i]=o[i],t&&(o[i]=0);return t&&qo(this,Go).layers.currentLayer.commitTransaction(),!0}},{key:"cut",value:function(){this.copy(!0)&&(qo(this,Go).commitObserver.commit(),qo(this,Go).render())}},{key:"paste",value:function(){if(qo(this,Xo)){if(qo(this,Go).layers.commitTransactions(),qo(this,Jo))qo(this,Go).layers.currentLayer.setPixels(qo(this,Go).layers.currentFrame,qo(this,Xo)),qo(this,Go).commitObserver.commit();else{var t,e=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(this,Vo,Qo).call(this);qo(this,Ho).setTool("move"),(t=qo(this,Go)).setSelection.apply(t,Bo(e)),qo(this,Go).layers.currentLayer.startTransactionFromBuffer(qo(this,Go).layers.currentFrame,qo(this,Xo))}qo(this,Go).render()}}}],r&&Ro(e.prototype,r),n&&Ro(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qo(){for(var t=_,e=0,r=A,n=0,o=0;o<A;o++)for(var i=0;i<_;i++)0!==qo(this,Xo)[o][i]&&(t=i<t?i:t,r=o<r?o:r,e=i>e?i:e,n=o>n?o:n);return t===_?[0,0,_,A]:[t,r,e+1,n+1]}function ti(t){return ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ti(t)}function ei(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==ti(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ti(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===ti(i)?i:String(i)),n)}var o,i}var ri=function(){},ni=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._element=e.element||document.body,this._handlers={start:e.start||ri,move:e.move||ri,finish:e.finish||ri,mouseMove:this._onMouseMove.bind(this),mouseUp:this._onMouseUp.bind(this),touchMove:this._wrapTouchEvent(this._onMouseMove.bind(this)),touchUp:this._wrapTouchEvent(this._onMouseUp.bind(this))},this._props={startClientX:0,startClienty:0,startElemX:0,startElemY:0},this._flags={dragging:!1,isMultipleTouches:!1},this._element.addEventListener("touchmove",(function(t){t.preventDefault()}),{passive:!1}),this._element.addEventListener("touchstart",this._wrapTouchEvent(this._onMouseDown.bind(this))),this._element.addEventListener("mousedown",this._onMouseDown.bind(this)),this._element.setAttribute("draggable","false")}var e,r,n;return e=t,(r=[{key:"isMultipleTouchesDetected",get:function(){return this._flags.isMultipleTouches}},{key:"_wrapTouchEvent",value:function(t){var e=this;return function(r){(r=e._createMouseFromTouchEvent(r))&&t(r)}}},{key:"_createMouseFromTouchEvent",value:function(t){if("touchmove"===t.type&&t.preventDefault(),t.touches.length>1)return this._flags.isMultipleTouches=!0,this._onMouseUp(),null;this._flags.isMultipleTouches=!1;var e={type:t.type,clientX:0,clientY:0,screenX:0,screenY:0,pageX:0,pageY:0,target:null,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,shiftKey:t.shiftKey,preventDefault:function(){return t.preventDefault()},stopPropagation:function(){return t.stopPropagation()}};if(t.touches&&t.touches.length>0){var r=t.touches[0];Object.assign(e,{clientX:r.clientX,clientY:r.clientY,screenX:r.screenX,screenY:r.screenY,pageX:r.pageX,pageY:r.pageY,target:r.target})}return e}},{key:"_onMouseDown",value:function(t){if(!this._flags.dragging&&("mousedown"!==t.type||0===t.button)){var e=this._props,r=this._element.getBoundingClientRect();e.startClientX=t.clientX,e.startClientY=t.clientY,e.startElemX=t.clientX-r.left,e.startElemY=t.clientY-r.top,this._flags.dragging=!0,"touchstart"===t.type?(document.addEventListener("touchmove",this._handlers.touchMove,{capture:!0,passive:!1}),document.addEventListener("touchend",this._handlers.touchUp,!0)):(document.addEventListener("mousemove",this._handlers.mouseMove,{capture:!0,passive:!1}),document.addEventListener("mouseup",this._handlers.mouseUp,!0)),this._handlers.start(e.startElemX,e.startElemY,t)}}},{key:"_onMouseMove",value:function(t){if(this._flags.dragging){var e=this._props,r=t.clientX-e.startClientX,n=t.clientY-e.startClientY;this._handlers.move(r,n,e.startElemX,e.startElemY)}}},{key:"_onMouseUp",value:function(){document.removeEventListener("touchmove",this._handlers.touchMove,{capture:!0,passive:!1}),document.removeEventListener("touchend",this._handlers.touchUp,!0),document.removeEventListener("mousemove",this._handlers.mouseMove,{capture:!0,passive:!1}),document.removeEventListener("mouseup",this._handlers.mouseUp,!0),this._flags.dragging&&(this._flags.dragging=!1,this._handlers.finish())}}])&&ei(e.prototype,r),n&&ei(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function oi(t){return oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oi(t)}function ii(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,e)||si(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ai(t){return function(t){if(Array.isArray(t))return ui(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||si(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function li(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=si(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function si(t,e){if(t){if("string"==typeof t)return ui(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ui(t,e):void 0}}function ui(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ci(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==oi(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==oi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===oi(i)?i:String(i)),n)}var o,i}function fi(t,e){Li(t,e),e.add(t)}function hi(t,e,r){Li(t,e),e.set(t,r)}function Li(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function yi(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,di(t,e,"get"))}function vi(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function pi(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,di(t,e,"set"),r),r}function di(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var mi=new WeakMap,bi=new WeakMap,wi=new WeakMap,gi=new WeakMap,ki=new WeakMap,Si=new WeakMap,ji=new WeakSet,Ei=new WeakSet,Mi=new WeakSet,Ci=new WeakSet,Oi=new WeakSet,xi=new WeakSet,Ti=new WeakSet,Pi=new WeakSet,_i=new WeakSet,Ai=new WeakSet,Wi=new WeakSet,Ii=new WeakSet,zi=new WeakSet,Ni=function(){function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),fi(this,zi),fi(this,Ii),fi(this,Wi),fi(this,Ai),fi(this,_i),fi(this,Pi),fi(this,Ti),fi(this,xi),fi(this,Oi),fi(this,Ci),fi(this,Mi),fi(this,Ei),fi(this,ji),hi(this,mi,{writable:!0,value:void 0}),hi(this,bi,{writable:!0,value:void 0}),hi(this,wi,{writable:!0,value:[]}),hi(this,gi,{writable:!0,value:new Map}),hi(this,ki,{writable:!0,value:document.querySelector(".layers-list")}),hi(this,Si,{writable:!0,value:document.querySelector(".layers-header-frames")}),pi(this,mi,e),pi(this,bi,r),vi(this,Ii,Xi).call(this),document.querySelector('.button[data-role="add-layer"]').onclick=function(){return vi(n,Ci,Ri).call(n)},document.querySelector('.button[data-role="remove-layer"]').onclick=function(){return vi(n,Mi,Ui).call(n)},document.querySelector('.button[data-role="merge-layer"]').onclick=function(){return vi(n,Ei,Bi).call(n)},document.querySelector('.button[data-role="copy-layer"]').onclick=function(){return vi(n,ji,Fi).call(n)},document.querySelector('.button[data-role="clear-frame"]').onclick=function(){return n.makeBlankFrame()},document.querySelector('.button[data-role="insert-frame"]').onclick=function(){return n.insertFrame()},document.querySelector('.button[data-role="remove-frame"]').onclick=function(){return n.removeFrame()},this.build()}var e,r,n;return e=t,(r=[{key:"build",value:function(){yi(this,ki).innerHTML="",pi(this,wi,[]),yi(this,gi).clear();var t,e=li(yi(this,mi).layers.layers);try{for(e.s();!(t=e.n()).done;){var r=t.value;vi(this,Ai,Gi).call(this,r)}}catch(t){e.e(t)}finally{e.f()}vi(this,Pi,Yi).call(this)}},{key:"sync",value:function(){var t=new Map(ai(yi(this,gi).entries()).map((function(t){var e=ii(t,2),r=e[0];return[e[1],r]})));pi(this,wi,[]);var e,r=li(yi(this,mi).layers.layers);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(t.has(n)){var o=t.get(n);yi(this,ki).appendChild(o),yi(this,wi).push(o),vi(this,_i,Zi).call(this,o),t.delete(n)}else vi(this,Ai,Gi).call(this,n)}}catch(t){r.e(t)}finally{r.f()}var i,a=li(t.values());try{for(a.s();!(i=a.n()).done;){var l=i.value;l.remove(),yi(this,gi).delete(l)}}catch(t){a.e(t)}finally{a.f()}vi(this,Pi,Yi).call(this)}},{key:"selectNextFrame",value:function(){yi(this,mi).layers.setCurrentFrame(yi(this,mi).layers.currentFrame+1),vi(this,Pi,Yi).call(this),yi(this,mi).render()}},{key:"selectPrevFrame",value:function(){yi(this,mi).layers.setCurrentFrame(yi(this,mi).layers.currentFrame-1),vi(this,Pi,Yi).call(this),yi(this,mi).render()}},{key:"makeBlankFrame",value:function(){yi(this,mi).layers.commitTransactions(),yi(this,mi).layers.currentLayer.createBlankKeyframe(yi(this,mi).layers.currentFrame),yi(this,mi).render()}},{key:"insertFrame",value:function(){yi(this,mi).layers.commitTransactions(),yi(this,mi).layers.currentLayer.insertFrame(yi(this,mi).layers.currentFrame),yi(this,mi).render()}},{key:"removeFrame",value:function(){yi(this,mi).layers.commitTransactions(),yi(this,mi).layers.currentLayer.removeFrame(yi(this,mi).layers.currentFrame),yi(this,mi).render()}}])&&ci(e.prototype,r),n&&ci(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Fi(){yi(this,mi).layers.duplicateSelectedLayer(),vi(this,Ai,Gi).call(this,yi(this,mi).layers.currentLayer,yi(this,mi).layers.currentLayerIndex),vi(this,Pi,Yi).call(this),yi(this,mi).render(),yi(this,bi).setTool("move")}function Bi(){var t=yi(this,mi).layers.currentLayerIndex;yi(this,mi).layers.mergeSelectedLayer()&&(yi(this,gi).delete(yi(this,wi)[t]),yi(this,wi)[t].remove(),yi(this,wi).splice(t,1),vi(this,Pi,Yi).call(this),yi(this,mi).render())}function Ui(){var t=yi(this,mi).layers.currentLayerIndex;yi(this,gi).delete(yi(this,wi)[t]),yi(this,wi)[t].remove(),yi(this,wi).splice(t,1),yi(this,mi).layers.removeSelectedLayer(),0===yi(this,wi).length&&vi(this,Ai,Gi).call(this,yi(this,mi).layers.currentLayer),yi(this,mi).render(),vi(this,Pi,Yi).call(this)}function Ri(){if(yi(this,mi).layers.layers.length>40)alert("ru"===floor796.detectUserLanguage()?"Слишком много слоев":"Too many layers");else{var t=yi(this,mi).layers.currentLayerIndex;yi(this,mi).layers.insertNewLayer(t),vi(this,Ai,Gi).call(this,yi(this,mi).layers.currentLayer,t),yi(this,mi).render(),vi(this,Pi,Yi).call(this)}}function Di(t){var e=yi(this,wi).indexOf(t);yi(this,mi).layers.setCurrentLayer(e),vi(this,Pi,Yi).call(this)}function Ki(t){var e=yi(this,wi).indexOf(t);yi(this,mi).layers.layers[e].setVisibility(!yi(this,mi).layers.layers[e].isVisible),vi(this,_i,Zi).call(this,t),yi(this,mi).render()}function qi(t){(t=Math.max(0,Math.min(t,I-1)))!==yi(this,mi).layers.currentFrame&&(yi(this,mi).layers.setCurrentFrame(t),vi(this,Pi,Yi).call(this),yi(this,mi).render())}function Yi(){for(var t=yi(this,mi).layers.currentLayerIndex,e=0;e<yi(this,wi).length;e++)yi(this,wi)[e].classList.toggle("selected",e===t);document.querySelectorAll(".layers-header-frames > div.selected, .layer-frames > div.selected").forEach((function(t){t.classList.remove("selected")}));var r=yi(this,mi).layers.currentFrame+1;document.querySelectorAll(".layers-header-frames > div:nth-child(".concat(r,"), .layer-frames > div:nth-child(").concat(r,")")).forEach((function(t){t.classList.add("selected")}))}function Zi(t){var e=yi(this,gi).get(t);if(e){t.querySelector(".layer-flag").dataset.flag=e.isVisible?"1":"0";for(var r=t.querySelectorAll(".layer-frames div"),n=e.getFramesStatus(),o={repeated:"repeated-frame",blank:"blank-frame",key:"key-frame",closeLeft:"close-left",closeRight:"close-right"},i=0;i<I;i++){var a={repeated:!1,blank:!1,key:!1,closeLeft:!1,closeRight:!1};1===n[i]?a.repeated=!0:2===n[i]?(a.blank=!0,a.closeLeft=!0,a.closeRight=!0):3===n[i]&&(a.key=!0,a.closeLeft=!0),(0===i||n[i-1]>1&&1!==n[i])&&(a.closeLeft=!0),(i===I-1||n[i+1]>1)&&(a.closeRight=!0);for(var l=0,s=Object.entries(a);l<s.length;l++){var u=ii(s[l],2),c=u[0],f=u[1];r[i].classList.toggle(o[c],f)}}}}function Gi(t){var e,r,n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i="ru"===floor796.detectUserLanguage()?"Поменять порядок отображения слоя":"Change layer order",a="ru"===floor796.detectUserLanguage()?"Скрыть/показать слой":"Hide/show layer",l=document.createElement("div");l.classList.add("layer-timeline"),l.innerHTML='\n\t\t\t<div class="layer-move" draggable="false" title="'.concat(i,'">\n\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" class="svg-icon">\n\t\t\t\t\t<use href="#icon-svg-bars"></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t<div class="layer-name">').concat(t.name,'</div>\n\t\t\t<div class="layer-flag" data-flag="1" title="').concat(a,'">\n\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" class="svg-icon" data-flag="1">\n\t\t\t\t\t<use href="#icon-svg-eye"></use>\n\t\t\t\t</svg>\n\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" class="svg-icon" data-flag="0">\n\t\t\t\t\t<use href="#icon-svg-eye-slash"></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t<div class="layer-frames">').concat("<div></div>".repeat(I),"</div>\n\t\t"),new ni({element:l.querySelector(".layer-move"),start:function(){vi(n,Wi,Hi).call(n,!0),l.classList.add("highlighted"),r=ai(yi(n,wi)),e=yi(n,wi).indexOf(l)},move:function(t,o){var i=Math.min(r.length-1,Math.max(0,e+Math.round(o/l.offsetHeight)));yi(n,wi)[i]!==l&&(pi(n,wi,ai(r)),yi(n,wi).splice(e,1),yi(n,wi).splice(i,0,l),vi(n,Wi,Hi).call(n,!0))},finish:function(){l.classList.remove("highlighted"),vi(n,Wi,Hi).call(n,!1),vi(n,Oi,Di).call(n,l)}}),l.querySelector(".layer-name").onclick=function(){return vi(n,Oi,Di).call(n,l)},l.querySelector(".layer-flag").onclick=function(){return vi(n,xi,Ki).call(n,l)},vi(this,zi,Ji).call(this,l.querySelector(".layer-frames"),(function(){return vi(n,Oi,Di).call(n,l)})),yi(this,gi).set(l,t),-1===o||0===yi(this,wi).length?(yi(this,wi).push(l),yi(this,ki).appendChild(l)):(yi(this,ki).insertBefore(l,yi(this,wi)[o]),yi(this,wi).splice(o,0,l));var s=0;t.addObserver((function(){clearTimeout(s),s=setTimeout((function(){vi(n,_i,Zi).call(n,l)}))})),vi(this,_i,Zi).call(this,l)}function Hi(t){var e=this;t?(yi(this,ki).style.height="".concat(yi(this,ki).offsetHeight,"px"),yi(this,wi).forEach((function(t,e){t.style.top="".concat(t.offsetHeight*e,"px")}))):(yi(this,ki).style.height="",yi(this,wi).forEach((function(t){t.style.top="",yi(e,ki).appendChild(t)}))),yi(this,ki).classList.toggle("drag-mode",t),yi(this,mi).layers.setLayersOrder(yi(this,wi).map((function(t){return yi(e,gi).get(t)}))),yi(this,mi).render()}function Xi(){for(var t=[],e=1;e<=I;e++)t.push("<div>".concat(e,"</div>"));yi(this,Si).innerHTML=t.join(""),vi(this,zi,Ji).call(this,yi(this,Si))}function Ji(t){var e,r,n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0,a=function(t){return vi(n,Ti,qi).call(n,Math.floor((t-e)/r))};new ni({element:t,start:function(n){e=t.firstElementChild.offsetLeft,r=t.firstElementChild.offsetWidth,i=n,o&&o(),a(n)},move:function(t){return a(i+t)}})}function Vi(t){return Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vi(t)}function $i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Vi(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Vi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Vi(i)?i:String(i)),n)}var o,i}function Qi(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function ta(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,ra(t,e,"set"),r),r}function ea(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,ra(t,e,"get"))}function ra(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var na=new WeakMap,oa=new WeakMap,ia=new WeakMap,aa=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Qi(this,na,{writable:!0,value:[]}),Qi(this,oa,{writable:!0,value:void 0}),Qi(this,ia,{writable:!0,value:!1})}var e,r,n;return e=t,(r=[{key:"observe",value:function(t){ea(this,na).push(t)}},{key:"setMute",value:function(t){ta(this,ia,t)}},{key:"commit",value:function(){var t=this;ea(this,ia)||(ea(this,oa)>0&&clearTimeout(ea(this,oa)),ta(this,oa,setTimeout((function(){ea(t,ia)||ea(t,na).forEach((function(t){return t()}))}))))}}])&&$i(e.prototype,r),n&&$i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function la(t){return la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},la(t)}function sa(t){return function(t){if(Array.isArray(t))return ua(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ua(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ua(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ua(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ca(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==la(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==la(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===la(i)?i:String(i)),n)}var o,i}var fa,ha=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=e,this._offset=0}var e,r,n;return e=t,r=[{key:"readUint8",value:function(){if(this._data.length<this._offset+1)return this._offset++,console.error("Cannot unpack uint8: not enough bytes"),0;var t=this._data[this._offset];return this._offset++,t}},{key:"readUint16",value:function(){if(this._data.length<this._offset+2)return this._offset+=2,console.error("Cannot unpack uint16: not enough bytes"),0;var t=this._data[this._offset]<<8|this._data[this._offset+1];return this._offset+=2,t}},{key:"readUint32",value:function(){if(this._data.length<this._offset+4)return this._offset+=4,console.error("Cannot unpack uint32: not enough bytes"),0;var t=this._data[this._offset]<<24|this._data[this._offset+1]<<16|this._data[this._offset+2]<<8|this._data[this._offset+3];return this._offset+=4,t}},{key:"readBytes",value:function(t){if(this._data.length<this._offset+t)return this._offset+=t,console.error("Cannot unpack: not enough bytes"),[];var e=this._data.slice(this._offset,this._offset+t);return this._offset+=t,e}},{key:"readShortString",value:function(){var t=this.readUint8();if(0===t)return"";if(this._data.length<this._offset+t)return this._offset+=t,console.error("Cannot unpack string: not enough bytes"),"";var e=sa(this._data.slice(this._offset,this._offset+t)).map((function(t){return String.fromCharCode(t)})).join("");return this._offset+=t,e}},{key:"readMapStringUint32",value:function(){for(var t=[],e=this.readUint16(),r=0;r<e;r++)t.push([this.readShortString(),this.readUint32()]);return new Map(t)}},{key:"readMapUint8Uint32",value:function(){for(var t=[],e=this.readUint16(),r=0;r<e;r++)t.push([this.readUint8(),this.readUint32()]);return new Map(t)}},{key:"readMapUint16Uint32",value:function(){for(var t=[],e=this.readUint16(),r=0;r<e;r++)t.push([this.readUint16(),this.readUint32()]);return new Map(t)}},{key:"readMapUint32Uint32",value:function(){for(var t=[],e=this.readUint16(),r=0;r<e;r++)t.push([this.readUint32(),this.readUint32()]);return new Map(t)}}],r&&ca(e.prototype,r),n&&ca(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function La(t){return La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},La(t)}function ya(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ya=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),l=new T(n||[]);return o(a,"_invoke",{value:M(t,r,l)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",L="suspendedYield",y="executing",v="completed",p={};function d(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(P([])));k&&k!==r&&n.call(k,a)&&(w=k);var S=b.prototype=d.prototype=Object.create(w);function j(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,l){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==La(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,l)}),(function(t){r("throw",t,a,l)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,l)}))}l(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function M(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var s=C(l,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:L,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(La(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},j(E.prototype),u(E.prototype,l,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},j(S),u(S,s,"Generator"),u(S,a,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return l.type="throw",l.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}function va(t){return function(t){if(Array.isArray(t))return ma(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||da(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pa(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=da(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function da(t,e){if(t){if("string"==typeof t)return ma(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ma(t,e):void 0}}function ma(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ba(t,e,r,n,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void r(t)}l.done?e(s):Promise.resolve(s).then(n,o)}function wa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==La(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==La(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===La(i)?i:String(i)),n)}var o,i}function ga(t,e,r){return function(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}(t,e),r}var ka="f796img".split("").map((function(t){return t.charCodeAt(0)})),Sa=3,ja=4,Ea=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n,o;return r=e,n=[{key:"packToFinalFile",value:function(r){return(t=t||(n=ya().mark((function t(r){var n,o,i,a,l,s,u;return ya().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new me(new aa,""),o=pa(va(r.layers.layers).reverse());try{for(o.s();!(i=o.n()).done;)a=i.value,n.mergeLayer(a)}catch(t){o.e(t)}finally{o.f()}return(l=[].concat(va(ka),[1])).push(1),ga(e,e,Ma).call(e,l,n),s=new Blob([new Uint8Array(l)],{type:"octet/stream"}),u=new FileReader,t.abrupt("return",new Promise((function(t){u.readAsDataURL(s),u.onloadend=function(){var e=u.result;t(e.substr(e.indexOf(",")+1))}})));case 9:case"end":return t.stop()}}),t)})),function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){ba(i,r,o,a,l,"next",t)}function l(t){ba(i,r,o,a,l,"throw",t)}a(void 0)}))})).apply(this,arguments);var n}},{key:"pack",value:function(t){var r=[].concat(va(ka),[1]);r.push(t.layers.layers.length);var n,o=pa(t.layers.layers);try{for(o.s();!(n=o.n()).done;){var i=n.value;ga(e,e,Ma).call(e,r,i)}}catch(t){o.e(t)}finally{o.f()}return r}},{key:"unpack",value:function(t,e){e.setState(this.unpackState(t))}},{key:"unpackState",value:function(t){var r=new ha(t);if(r.readBytes(ka.length).join(",")!==ka.join(","))throw new Error("Wrong file signature");if(1!==r.readUint8())throw new Error("Missing canvas chunk type");for(var n=r.readUint8(),o={x:0,y:0,scale:1,tool:0,selection:null,selectionOffset:[0,0],layers:{current:{layer:0,frame:0},layers:[]}},i=0;i<n;i++)o.layers.layers.push(ga(e,e,Ca).call(e,r));return o}}],n&&wa(r.prototype,n),o&&wa(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Ma(t,e){var r=e.getState();t.push(2),t.push.apply(t,va(ga(fa,fa,Oa).call(fa,r.id))),t.push.apply(t,va(ga(fa,fa,Oa).call(fa,r.name))),ga(fa,fa,xa).call(fa,t,r.frames)}function Ca(t){var e={};if(2!==t.readUint8())throw new Error("Missing layer chunk type");return e.id=t.readShortString(),e.name=t.readShortString(),e.frames=ga(fa,fa,Pa).call(fa,t),e.transaction=null,e.transactionOffset=[0,0],e.visible=!0,e}function Oa(t){var e=(new TextEncoder).encode(t);return[e.length].concat(va(e))}function xa(t,e){t.push(Sa);var r=e[0];r||(r=new Array(A).fill(null).map((function(t){return new Array(_).fill(0)})));for(var n=0;n<I;n++)if(null!==e[n]){var o=ga(fa,fa,Ta).call(fa,n,e[n],r);t.push.apply(t,[ja,o.length>>8&255,255&o.length].concat(va(o)))}else t.push(ja,0,0)}function Ta(t,e,r){for(var n=[],o=-1,i=0,a=!1,l=Math.pow(2,14)-1,s=Math.pow(2,6)-1,u=A-1,c=_-1,f=0;f<A;f++)for(var h=e[f],L=r[f],y=0;y<_;y++){var v=h[y],p=f===u&&y===c;t>0&&v===L[y]&&(0===i||a)&&i<l&&!p?(i++,a=!0):(a&&(n.push(192|i>>8&s),n.push(255&i),a=!1,i=0,o=-1),o===v&&i<65534&&!p?i++:(i>0&&(++i>255?(n[n.length-1]=128|o,n.push(i>>8&255,255&i)):(n[n.length-1]=64|o,n.push(255&i)),i=0),o=v,n.push(v&s)))}return n}function Pa(t){var e=[];if(t.readUint8()!==Sa)throw new Error("Missing expected frame array chunk");for(var r=null,n=0;n<I;n++){if(t.readUint8()!==ja)throw new Error("Missing expected frame chunk: frame #"+n);var o=t.readUint16();if(0!==o){var i=t.readBytes(o);if(i.length!==o)throw new Error("Invalid length of bytes");e.push(ga(fa,fa,_a).call(fa,i,r)),0===n&&(r=e[0].flat())}else e.push(null)}return e}function _a(t,e){for(var r=[],n=Math.pow(2,6)-1,o=0;o<t.length;o++){var i=t[o]>>6&3;if(0===i)r.push(t[o]&n);else if(1===i){if(o+1>=t.length)throw new Error("Not enough bytes for unpack repeated pixels (max 256)");r.push.apply(r,va(new Array(t[o+1]).fill(t[o]&n))),o+=1}else if(2===i){if(o+2>=t.length)throw new Error("Not enough bytes for unpack repeated pixels (max 65535)");var a=t[o+1]<<8|t[o+2];r.push.apply(r,va(new Array(a).fill(t[o]&n))),o+=2}else if(3===i){if(o+1>=t.length)throw new Error("Not enough bytes for unpack repeated first frame pixels");for(var l=(t[o]&n)<<8|t[o+1],s=r.length,u=r.length+l;s<u;s++)null===e?r.push(0):r.push(e[s]);o+=1}}if(r.length!==A*_)throw new Error("Invalid unpacked pixels count: "+r.length);for(var c=[],f=0;f<A;f++)c.push(r.splice(0,_));return c}function Aa(t){return Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Aa(t)}function Wa(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Wa=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),l=new T(n||[]);return o(a,"_invoke",{value:M(t,r,l)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",L="suspendedYield",y="executing",v="completed",p={};function d(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(P([])));k&&k!==r&&n.call(k,a)&&(w=k);var S=b.prototype=d.prototype=Object.create(w);function j(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,l){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==Aa(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,l)}),(function(t){r("throw",t,a,l)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,l)}))}l(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function M(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var s=C(l,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:L,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Aa(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},j(E.prototype),u(E.prototype,l,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},j(S),u(S,s,"Generator"),u(S,a,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return l.type="throw",l.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}function Ia(t,e,r,n,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void r(t)}l.done?e(s):Promise.resolve(s).then(n,o)}function za(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Aa(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Aa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Aa(i)?i:String(i)),n)}var o,i}function Na(t,e,r){Fa(t,e),e.set(t,r)}function Fa(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ba(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ra(t,e,"get"))}function Ua(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Ra(t,e,"set"),r),r}function Ra(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}fa=Ea;var Da=new WeakMap,Ka=new WeakMap,qa=new WeakMap,Ya=new WeakMap,Za=new WeakMap,Ga=new WeakMap,Ha=new WeakMap,Xa=new WeakSet,Ja=function(t){function e(t,r,n,o){var i,a,l=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Fa(i=this,a=Xa),a.add(i),Na(this,Da,{writable:!0,value:void 0}),Na(this,Ka,{writable:!0,value:void 0}),Na(this,qa,{writable:!0,value:void 0}),Na(this,Ya,{writable:!0,value:void 0}),Na(this,Za,{writable:!0,value:[]}),Na(this,Ga,{writable:!0,value:-1}),Na(this,Ha,{writable:!0,value:""}),Ua(this,Da,t),Ua(this,Ka,r),Ua(this,qa,n),Ua(this,Ya,o),this.save(),document.querySelector('.button[data-role="undo"]').onclick=function(){return l.undo()},document.querySelector('.button[data-role="redo"]').onclick=function(){return l.redo()},Ba(this,Da).observe((function(){return l.save()}))}var r,n,o;return r=e,n=[{key:"restoreFromLocalStorage",value:function(){return(t=t||(e=Wa().mark((function t(){var e,r;return Wa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=localStorage.getItem(U)){t.next=3;break}return t.abrupt("return",!1);case 3:if(e.startsWith("data:octet/stream;base64,")){t.next=5;break}return t.abrupt("return",!1);case 5:return t.prev=5,t.next=8,fetch(e);case 8:return t.next=10,t.sent.blob();case 10:r=t.sent,t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(5),console.error(t.t0),t.abrupt("return",!1);case 17:return Ua(this,Za,[]),Ua(this,Ga,-1),Ua(this,Ha,""),t.prev=20,t.t1=new Ea,t.t2=Uint8Array,t.next=25,r.arrayBuffer();case 25:t.t3=t.sent,t.t4=new t.t2(t.t3),t.t5=Ba(this,Ka),t.t1.unpack.call(t.t1,t.t4,t.t5),t.next=37;break;case 31:return t.prev=31,t.t6=t.catch(20),alert("Error while reading animation from Local Storage. Please report this error to info@floor796.com"),localStorage.setItem("fun-drawing-bak",e),console.error(t.t6),t.abrupt("return",!1);case 37:return this.save(),Ba(this,qa).sync(),Ba(this,Ya).sync(),t.abrupt("return",!0);case 41:case"end":return t.stop()}}),t,this,[[5,13],[20,31]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){Ia(i,n,o,a,l,"next",t)}function l(t){Ia(i,n,o,a,l,"throw",t)}a(void 0)}))})).apply(this,arguments);var e}},{key:"reset",value:function(){Ua(this,Za,[]),Ua(this,Ga,-1),Ua(this,Ha,""),this.save()}},{key:"save",value:function(){console.log("save");var t,e=Ba(this,Ka).getState(),r=JSON.stringify(e);Ba(this,Ha)!==r?(function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(this,Xa,Va).call(this),Ua(this,Ha,r),Ba(this,Ga)<Ba(this,Za).length-1&&Ba(this,Za).splice(Ba(this,Ga)+1),Ba(this,Za).push(e),30===Ba(this,Za).length?Ba(this,Za).shift():Ua(this,Ga,(t=Ba(this,Ga),++t))):console.log("skip")}},{key:"undo",value:function(){var t;0!==Ba(this,Ga)&&(Ua(this,Ha,""),Ua(this,Ga,(t=Ba(this,Ga),--t)),Ba(this,Ka).setState(Ba(this,Za)[Ba(this,Ga)]),Ba(this,qa).sync(),Ba(this,Ya).sync())}},{key:"redo",value:function(){var t;Ba(this,Ga)!==Ba(this,Za).length-1&&(Ua(this,Ha,""),Ua(this,Ga,(t=Ba(this,Ga),++t)),Ba(this,Ka).setState(Ba(this,Za)[Ba(this,Ga)]),Ba(this,qa).sync(),Ba(this,Ya).sync())}}],n&&za(r.prototype,n),o&&za(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Va(){var t=new Blob([new Uint8Array((new Ea).pack(Ba(this,Ka)))],{type:"octet/stream"}),e=new FileReader;e.readAsDataURL(t),e.onloadend=function(){localStorage.setItem(U,e.result)}}function $a(t){return $a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$a(t)}function Qa(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return tl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tl(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function tl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function el(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==$a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==$a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===$a(i)?i:String(i)),n)}var o,i}function rl(t,e){return rl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rl(t,e)}function nl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=il(t);if(e){var o=il(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===$a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ol(t)}(this,r)}}function ol(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function il(t){return il=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},il(t)}function al(t,e,r){ll(t,e),e.set(t,r)}function ll(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function sl(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,fl(t,e,"get"))}function ul(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function cl(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,fl(t,e,"set"),r),r}function fl(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var hl=new WeakMap,Ll=new WeakMap,yl=new WeakSet,vl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rl(t,e)}(i,t);var e,r,n,o=nl(i);function i(t,e){var r,n,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this),ll(n=ol(r),a=yl),a.add(n),al(ol(r),hl,{writable:!0,value:void 0}),al(ol(r),Ll,{writable:!0,value:void 0}),cl(ol(r),hl,t),cl(ol(r),Ll,e),r}return e=i,(r=[{key:"handleStart",value:function(t,e,r,n){ul(this,yl,pl).call(this,t,e)}},{key:"handleMove",value:function(t,e,r,n){ul(this,yl,pl).call(this,t,e)}},{key:"handleEnd",value:function(t,e,r,n){ul(this,yl,pl).call(this,t,e)}}])&&el(e.prototype,r),n&&el(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Re);function pl(t,e){var r,n=0,o=Qa(sl(this,hl).layers.layers);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i.isVisible&&0!==(n=i.getPixel(sl(this,hl).layers.currentFrame,t,e)))break}}catch(t){o.e(t)}finally{o.f()}0!==n&&sl(this,Ll).setColor(n)}function dl(t){return dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dl(t)}function ml(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return bl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bl(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==dl(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==dl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===dl(i)?i:String(i)),n)}var o,i}function gl(t,e){Sl(t,e),e.add(t)}function kl(t,e,r){Sl(t,e),e.set(t,r)}function Sl(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function jl(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function El(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Cl(t,e,"get"))}function Ml(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Cl(t,e,"set"),r),r}function Cl(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Ol=new WeakMap,xl=new WeakMap,Tl=new WeakMap,Pl=new WeakMap,_l=new WeakMap,Al=new WeakMap,Wl=new WeakMap,Il=new WeakMap,zl=new WeakMap,Nl=new WeakSet,Fl=new WeakSet,Bl=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),gl(this,Fl),gl(this,Nl),kl(this,Ol,{writable:!0,value:void 0}),kl(this,xl,{writable:!0,value:void 0}),kl(this,Tl,{writable:!0,value:void 0}),kl(this,Pl,{writable:!0,value:[]}),kl(this,_l,{writable:!0,value:[]}),kl(this,Al,{writable:!0,value:0}),kl(this,Wl,{writable:!0,value:void 0}),kl(this,Il,{writable:!0,value:void 0}),kl(this,zl,{writable:!0,value:null}),Ml(this,_l,e),Ml(this,Ol,document.createElement("canvas")),El(this,Ol).width=_,El(this,Ol).height=A,Ml(this,xl,El(this,Ol).getContext("2d")),Ml(this,Tl,new ImageData(_,A))}var e,r,n;return e=t,r=[{key:"canvas",get:function(){return El(this,Ol)}},{key:"destroy",value:function(){this.stop(),El(this,Ol).parentElement&&El(this,Ol).remove(),Ml(this,Ol,null),Ml(this,xl,null),Ml(this,Tl,null),Ml(this,_l,null)}},{key:"isDestroyed",value:function(){return null===El(this,Tl)}},{key:"stop",value:function(){Ml(this,Al,0),El(this,Wl)&&cancelAnimationFrame(El(this,Wl)),El(this,Il)>0&&clearInterval(El(this,Il))}},{key:"play",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;El(this,Tl)?(Ml(this,Pl,t),Ml(this,zl,e),this.stop(),Ml(this,Il,setInterval(jl(this,Nl,Ul).bind(this),166)),jl(this,Nl,Ul).call(this)):console.log("[FT] Instance was already destroyed")}}],r&&wl(e.prototype,r),n&&wl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ul(){var t=this;if(El(this,Tl)){El(this,Wl)&&cancelAnimationFrame(El(this,Wl));var e=El(this,Al);Ml(this,Wl,requestAnimationFrame((function(){if(El(t,Pl)[e])jl(t,Fl,Rl).call(t,El(t,Pl)[e]);else if(0===e)return El(t,xl).clearRect(0,0,_,A),void(El(t,zl)&&El(t,zl).call(t));El(t,xl).putImageData(El(t,Tl),0,0),El(t,zl)&&El(t,zl).call(t)}))),Ml(this,Al,(El(this,Al)+1)%I)}else this.stop()}function Rl(t){for(var e=El(this,Tl).data,r=0,n=0;n<A;n++)for(var o=t[n],i=0;i<_;i++)if(0!==o[i]){var a=ml(El(this,_l)[o[i]],3),l=a[0],s=a[1],u=a[2];e[r++]=l,e[r++]=s,e[r++]=u,e[r++]=255}else e[r++]=70,e[r++]=70,e[r++]=70,e[r++]=255}function Dl(t){return Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dl(t)}function Kl(t){return function(t){if(Array.isArray(t))return Yl(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ql(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ql(t,e){if(t){if("string"==typeof t)return Yl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yl(t,e):void 0}}function Yl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Zl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Dl(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Dl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Dl(i)?i:String(i)),n)}var o,i}function Gl(t,e){Xl(t,e),e.add(t)}function Hl(t,e,r){Xl(t,e),e.set(t,r)}function Xl(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Jl(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Vl(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ql(t,e,"get"))}function $l(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Ql(t,e,"set"),r),r}function Ql(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var ts=[.7,0,0,.559,1,0,0,0,1],es=new WeakMap,rs=new WeakMap,ns=new WeakMap,os=new WeakMap,is=new WeakSet,as=new WeakSet,ls=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Gl(this,as),Gl(this,is),Hl(this,es,{writable:!0,value:void 0}),Hl(this,rs,{writable:!0,value:void 0}),Hl(this,ns,{writable:!0,value:document.querySelector(".preview-popup")}),Hl(this,os,{writable:!0,value:document.querySelector(".preview-popup canvas").getContext("2d")}),$l(this,es,e),Vl(this,os).canvas.width=252*N,Vl(this,os).canvas.height=404*N,document.querySelector('.button[data-role="play"]').onclick=function(){return r.play()},Vl(this,ns).onclick=function(){return r.closePopup()}}var e,r,n;return e=t,(r=[{key:"closePopup",value:function(){Vl(this,ns).hidden=!0,Vl(this,rs)&&(Vl(this,rs).stop(),$l(this,rs,null))}},{key:"play",value:function(){if(Vl(this,ns).hidden){Vl(this,ns).hidden=!1;var t,e=new me(new aa,""),r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ql(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}(Kl(Vl(this,es).layers.layers).reverse());try{for(r.s();!(t=r.n()).done;){var n=t.value;e.mergeLayer(n)}}catch(t){r.e(t)}finally{r.f()}$l(this,rs,new Bl(Vl(this,es).palette)),Vl(this,rs).play(e.getState().frames,Jl(this,is,ss).bind(this))}}}])&&Zl(e.prototype,r),n&&Zl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ss(){Vl(this,os).clearRect(0,0,Vl(this,os).canvas.width,Vl(this,os).canvas.height),Vl(this,os).save(),Vl(this,os).setTransform(ts[0],ts[3],ts[1],ts[4],ts[2],ts[5]),Vl(this,os).scale(4*N,4*N),Vl(this,os).fillStyle="#ff0000",Vl(this,os).drawImage(Vl(this,rs).canvas,10,8),Vl(this,os).restore(),Jl(this,as,us).call(this)}function us(){Vl(this,os).save(),Vl(this,os).lineWidth=2,Vl(this,os).globalAlpha=.3,Vl(this,os).strokeStyle="#555555",Vl(this,os).setTransform(ts[0],ts[3],ts[1],ts[4],ts[2],ts[5]);var t=41*N,e=33*N;Vl(this,os).beginPath();for(var r=_>>1,n=A>>1,o=8*N,i=o*r,a=o*n,l=0;l<=r;l++){var s=t+l*o;Vl(this,os).moveTo(s+.5,e+.5),Vl(this,os).lineTo(s+.5,e+a+.5)}for(var u=0;u<=n;u++){var c=e+u*o;Vl(this,os).moveTo(t+.5,c+.5),Vl(this,os).lineTo(t+i+.5,c+.5)}Vl(this,os).stroke(),Vl(this,os).restore()}function cs(t){return cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cs(t)}function fs(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */fs=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),l=new T(n||[]);return o(a,"_invoke",{value:M(t,r,l)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",L="suspendedYield",y="executing",v="completed",p={};function d(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(P([])));k&&k!==r&&n.call(k,a)&&(w=k);var S=b.prototype=d.prototype=Object.create(w);function j(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,l){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==cs(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,l)}),(function(t){r("throw",t,a,l)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,l)}))}l(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function M(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var s=C(l,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:L,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(cs(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},j(E.prototype),u(E.prototype,l,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},j(S),u(S,s,"Generator"),u(S,a,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return l.type="throw",l.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}function hs(t,e,r,n,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void r(t)}l.done?e(s):Promise.resolve(s).then(n,o)}function Ls(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){hs(i,n,o,a,l,"next",t)}function l(t){hs(i,n,o,a,l,"throw",t)}a(void 0)}))}}function ys(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==cs(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==cs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===cs(i)?i:String(i)),n)}var o,i}function vs(t,e){ds(t,e),e.add(t)}function ps(t,e,r){ds(t,e),e.set(t,r)}function ds(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ms(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,gs(t,e,"get"))}function bs(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function ws(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,gs(t,e,"set"),r),r}function gs(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var ks=new WeakMap,Ss=new WeakMap,js=new WeakMap,Es=new WeakMap,Ms=new WeakSet,Cs=new WeakSet,Os=new WeakSet,xs=function(t){function e(t,r,n,o){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),vs(this,Os),vs(this,Cs),vs(this,Ms),ps(this,ks,{writable:!0,value:void 0}),ps(this,Ss,{writable:!0,value:void 0}),ps(this,js,{writable:!0,value:void 0}),ps(this,Es,{writable:!0,value:void 0}),ws(this,ks,t),ws(this,Ss,r),ws(this,js,n),ws(this,Es,o),document.querySelector('.button[data-role="download"]').onclick=function(){return bs(i,Os,_s).call(i)},document.querySelector('.button[data-role="open"]').onclick=function(){return bs(i,Ms,Ts).call(i)}}var r,n,o;return r=e,n=[{key:"loadByUrl",value:function(e){return(t=t||Ls(fs().mark((function t(e){var r;return fs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,fetch(e);case 3:return t.next=5,t.sent.blob();case 5:return t.next=7,t.sent.arrayBuffer();case 7:t.t1=t.sent,r=new t.t0(t.t1),bs(this,Cs,Ps).call(this,r);case 10:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}}],n&&ys(r.prototype,n),o&&ys(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Ts(){var t,e=this,r=document.createElement("input");r.type="file",r.accept=".f796i",r.onchange=function(n){return(t=t||Ls(fs().mark((function t(n){var o;return fs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,r.files[0].arrayBuffer();case 3:t.t1=t.sent,o=new t.t0(t.t1),bs(e,Cs,Ps).call(e,o);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)},r.click()}function Ps(t){try{(new Ea).unpack(t,ms(this,ks))}catch(t){return void alert("ru"===floor796.detectUserLanguage()?"Ошибка во время чтения файла. Пожалуйста, свяжитесь с автором проекта: info@floor796.com":"Error while reading the file. Please contact with author of this project: info@floor796.com")}ms(this,Ss).build(),ms(this,js).sync(),ms(this,Es).reset()}function _s(){var t=document.createElement("a");document.body.appendChild(t);var e=(new Ea).pack(ms(this,ks)),r=new Blob([new Uint8Array(e)],{type:"octet/stream"}),n=window.URL.createObjectURL(r);t.href=n,t.download="fun-animation.f796i",t.click(),setTimeout((function(){window.URL.revokeObjectURL(n),document.body.removeChild(t)}),0)}function As(t){return As="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},As(t)}function Ws(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==As(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==As(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===As(i)?i:String(i)),n)}var o,i}function Is(t,e,r){return e&&Ws(t.prototype,e),r&&Ws(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function zs(t,e){Ns(t,e),e.add(t)}function Ns(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fs(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Rs(t,e,"get"))}function Bs(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Us(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Rs(t,e,"set"),r),r}function Rs(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Ds=new WeakMap,Ks=new WeakSet,qs=new WeakSet,Ys=new WeakSet,Zs=Is((function t(e){var r,n,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),zs(this,Ys),zs(this,qs),zs(this,Ks),o={writable:!0,value:void 0},Ns(r=this,n=Ds),n.set(r,o),Us(this,Ds,e),document.querySelector('button[data-role="flip-x"]').onclick=function(){return Bs(i,Ks,Gs).call(i)},document.querySelector('button[data-role="flip-y"]').onclick=function(){return Bs(i,qs,Hs).call(i)}}));function Gs(){Bs(this,Ys,Xs).call(this,(function(t,e,r){for(var n=r[1];n<r[3];n++)for(var o=r[0];o<r[2];o++)e[n][o]=t[n][r[2]-1-(o-r[0])]}))}function Hs(){Bs(this,Ys,Xs).call(this,(function(t,e,r){for(var n=r[1];n<r[3];n++)for(var o=r[0];o<r[2];o++)e[n][o]=t[r[3]-1-(n-r[1])][o]}))}function Xs(t){Fs(this,Ds).layers.commitTransactions(),Fs(this,Ds).applySelectionTranslate();var e=Fs(this,Ds).layers.currentLayer,r=Fs(this,Ds).getSelection(),n=e.getPixels(Fs(this,Ds).layers.currentFrame,!0);r||(r=[0,0,_,A]);var o=JSON.parse(JSON.stringify(n));t(n,o,r),e.setPixels(Fs(this,Ds).layers.currentFrame,o),e.startTransaction(),e.commitTransaction(),Fs(this,Ds).render()}function Js(t){return Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Js(t)}function Vs(t){return function(t){if(Array.isArray(t))return $s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return $s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Qs(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Qs=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),l=new T(n||[]);return o(a,"_invoke",{value:M(t,r,l)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",L="suspendedYield",y="executing",v="completed",p={};function d(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(P([])));k&&k!==r&&n.call(k,a)&&(w=k);var S=b.prototype=d.prototype=Object.create(w);function j(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,l){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==Js(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,l)}),(function(t){r("throw",t,a,l)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,l)}))}l(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function M(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var s=C(l,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:L,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Js(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},j(E.prototype),u(E.prototype,l,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},j(S),u(S,s,"Generator"),u(S,a,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return l.type="throw",l.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}function tu(t,e,r,n,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void r(t)}l.done?e(s):Promise.resolve(s).then(n,o)}function eu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Js(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Js(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Js(i)?i:String(i)),n)}var o,i}function ru(t,e,r){nu(t,e),e.set(t,r)}function nu(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ou(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,au(t,e,"get"))}function iu(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,au(t,e,"set"),r),r}function au(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var lu=new WeakMap,su=new WeakMap,uu=new WeakMap,cu=new WeakMap,fu=new WeakMap,hu=new WeakMap,Lu=new WeakMap,yu=new WeakMap,vu=new WeakMap,pu=new WeakMap,du=new WeakMap,mu=new WeakMap,bu=new WeakSet,wu=function(t){function e(){var t,r,n=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),nu(t=this,r=bu),r.add(t),ru(this,lu,{writable:!0,value:void 0}),ru(this,su,{writable:!0,value:void 0}),ru(this,uu,{writable:!0,value:void 0}),ru(this,cu,{writable:!0,value:void 0}),ru(this,fu,{writable:!0,value:void 0}),ru(this,hu,{writable:!0,value:void 0}),ru(this,Lu,{writable:!0,value:void 0}),ru(this,yu,{writable:!0,value:void 0}),ru(this,vu,{writable:!0,value:void 0}),ru(this,pu,{writable:!0,value:void 0}),ru(this,du,{writable:!0,value:void 0}),ru(this,mu,{writable:!0,value:void 0}),(document.querySelector("#editor-container")||document.body).innerHTML='<svg xmlns="http://www.w3.org/2000/svg" style="position:absolute;left:0;top:0;width:0;height:0"> <symbol id="icon-svg-rect" viewBox="0 0 16 16"> <rect height="16" width="16" stroke="currentColor" stroke-width="2" fill="none" stroke-dasharray="3"/> </symbol> <symbol id="icon-svg-move" viewBox="0 0 64 64"> <rect fill="currentColor" stroke="none" stroke-width="10" stroke-dasharray="5,5" x="27.962209296951233" y="16.184040246371" width="8.804118252289" height="32.09844876118882" fill-opacity="1"/> <rect fill="currentColor" stroke="none" stroke-width="10" stroke-dasharray="5,5" x="19.095775887361537" y="27.975846314259165" width="5.754183769226072" height="23.573682785034173" fill-opacity="1" transform="matrix(-0.0026736135564302647,1.4740596405619115,-1.4486633399727111,-0.002720484276262067,90.20314832202966,-1.3113598017485089) "/> <path fill="currentColor" fill-opacity="1" stroke="none" stroke-opacity="1" stroke-width="10" stroke-dasharray="5,5" d="M21.428434014693526,16.74358737320141 C21.635758178541046,16.51975372721568 33.10769524476984,0.7394816852206175 33.24591135400153,0.7394816852206175 C33.38412746323321,0.7394816852206175 43.61211954637696,16.74358737320141 43.543011491761135,16.698821327090347 "/> <path fill="currentColor" fill-opacity="1" stroke="none" stroke-opacity="1" stroke-width="10" stroke-dasharray="5,5" d="M43.73168160641382,47.60029076261687 C43.52570385326947,47.82540774809559 32.14863017917912,63.6766280162016 32.0104166441204,63.67748635502116 C31.87220310906168,63.678344693840714 21.548409229489653,47.73805414315573 21.617784502810597,47.782390186122456 "/> <path fill="currentColor" fill-opacity="1" stroke="none" stroke-opacity="1" stroke-width="10" stroke-dasharray="5,5" d="M47.74690366408035,19.46430302326763 C47.96566472793373,19.676567128357753 63.40670828382047,31.441700467774584 63.40589999572281,31.582337218079488 C63.40509170762516,31.722973968384395 47.61717342440706,42.03650144720424 47.66157159635,41.96644486398369 "/> <path fill="currentColor" fill-opacity="1" stroke="none" stroke-opacity="1" stroke-width="10" stroke-dasharray="5,5" d="M16.224272564951683,41.97858382255054 C16.00653715281545,41.765230645516326 0.6223821259312637,29.923187500879546 0.6238682125808775,29.782556475109196 C0.6253542992304889,29.641925449338874 16.46278947221444,19.40730418641242 16.41805419174603,19.47713837896629 "/> </symbol> <symbol id="icon-svg-eraser" viewBox="0 0 64 64"> <path fill="currentColor" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="2" stroke-dasharray="none" stroke-linejoin="round" d="M6.23396,32.42545L40.91925,2.05027"/> <path fill="currentColor" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="2" stroke-dasharray="none" stroke-linejoin="round" d="M22.814275799245763,61.91732942627632 L58.994535336334636,25.97409650243007 "/> <path fill="currentColor" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="2" stroke-dasharray="none" stroke-linejoin="round" d="M22.814275799245763,61.91732942627632 L58.994535336334636,25.97409650243007 "/> <path fill="currentColor" fill-opacity="1" stroke="none" stroke-width="2" stroke-dasharray="none" stroke-linejoin="round" d="M9.85536,25.87989L29.81191,41.94722L58.19349,13.32945L38.93086,0.3352L9.85536,25.87989z"/> <path fill="currentColor" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="2" stroke-dasharray="none" stroke-linejoin="round" d="M58.40356388115849,26.780515172043962 L57.23645863720025,13.071396651166829 "/> <path fill="currentColor" fill-opacity="1" stroke="none" stroke-opacity="1" stroke-width="2" stroke-dasharray="none" stroke-linejoin="round" d="M29.04378,55.46333C29.27721,53.62009 29.89044,48.05469 29.99973,43.78648L56.79296,17.13705C56.88633,17.22461 58.17014,26.44082 58.07677,26.35327L29.04378,55.46333z"/> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="2" stroke-dasharray="none" stroke-linejoin="round" d="M6.7541,31.77705C4.61203,35.79308 2.29509,43.24227 3.49727,45.68306C4.69946,48.12386 15.40984,57.44991 23.1694,61.20218"/> </symbol> <symbol id="icon-svg-fill" viewBox="0 0 64 64"> <rect fill="none" stroke="currentColor" stroke-width="5" stroke-linejoin="round" x="12.510204315185547" y="16.40816307067871" width="33.938777923583984" height="37.67346954345703" rx="0" ry="0" stroke-opacity="1" transform="rotate(36.96132278442383 29.479593276977557,35.24489593505859) "/> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="5" stroke-dasharray="none" stroke-linejoin="round" d="M22.612241966632112,28.379590786143893L22.204078709269965,1.0326525428800686"/> <path fill="currentColor" fill-opacity="1" stroke="none" stroke-opacity="1" stroke-width="5" stroke-dasharray="none" stroke-linejoin="round" d="M 8.020405515935366 36.23673349036522 C 8.020405515935366 36.23673349036522 49.04081288083111 36.134692676024684 48.97959183673469 36.12244897959184 C 49.04081288083111 36.134692676024684 32.51020095766417 59.80816160302918 32.51020095766417 59.706120788688644 C 32.51020095766417 59.60407997434811 5.67346678610302 41.134692578710975 5.612244897959183 41.12244897959183 C 5.67346678610302 41.134692578710975 8.020405515935366 36.23673349036522 8.020405515935366 36.23673349036522 z"/> <path fill="currentColor" fill-opacity="1" stroke="none" stroke-opacity="1" stroke-width="5" stroke-dasharray="none" stroke-linejoin="round" d="M51.82759454525525,47.14944446321862 C55.19109250904137,42.214137028478554 55.574430027792985,40.404241325963916 55.62553528762871,40.26630382784265 C55.67664054746443,40.12836632972138 57.181162366519516,43.73144950781244 60.40450199205691,48.11500695006745 C63.6278416175943,52.49856439232248 59.88100613505655,55.68783507604974 55.62553528762871,55.549897577928476 C51.37006444020086,55.411960079807216 48.46409658146911,52.08475189795868 51.82759454525525,47.14944446321862 z"/> </symbol> <symbol id="icon-svg-ellipse" viewBox="0 0 64 64"> <path fill="none" stroke="currentColor" stroke-opacity="1" stroke-width="5" stroke-dasharray="none" stroke-linejoin="round" d="M4.306122420915013,32.561224688389636 C4.306122420915013,19.746927552367396 16.562520923549393,9.36734687218938 31.69387709964121,9.36734687218938 C46.82523327573303,9.36734687218938 59.08163177836741,19.746927552367396 59.08163177836741,32.561224688389636 C59.08163177836741,45.37552182441188 46.82523327573303,55.75510250458989 31.69387709964121,55.75510250458989 C16.562520923549393,55.75510250458989 4.306122420915013,45.37552182441188 4.306122420915013,32.561224688389636 z"/> </symbol> <symbol id="icon-svg-pick-color" viewBox="0 0 64 64"> <g transform="rotate(43.537715911865234 32.7808609008789,30.78988456726075) "> <path fill="currentColor" fill-opacity="1" stroke="none" stroke-opacity="1" stroke-width="5" stroke-dasharray="none" stroke-linejoin="round" d="M25.964453399482753,1.3365881030791034 C26.40744846687918,-1.8203840684677681 34.462366386863074,-9.1388106079589 39.5570997609744,1.3365881030791034 L39.5570997609744,25.530450545533597 L25.824307928647755,25.530450545533597 C25.730067179309525,17.60595678845079 25.521458332086336,4.493560274625976 25.964453399482753,1.3365881030791034 z"/> <rect fill="currentColor" stroke-width="5" stroke-linejoin="round" x="18.52257227884195" y="22.18227054445466" width="28.51657366372174" height="7.918321127626662" rx="4" ry="4"/> <path fill="none" stroke="currentColor" stroke-opacity="1" stroke-width="4" stroke-dasharray="none" stroke-linejoin="round" d="M25.3068331600395,28.26789379015831 C25.3068331600395,28.26789379015831 25.78871483544977,54.51395438441423 25.710300627061443,54.496710039512195 C25.78871483544977,54.51395438441423 29.750958670589046,57.18879178351072 30.28511982013853,57.66032881466535 C30.057251352378444,58.53295254290609 30.20668560046823,62.100903305053976 30.28511982013853,63.98755438973217 C30.36354403416784,65.87422942488936 35.82718432709844,66.70252081644443 36.03631222929628,63.6999570375326 C36.245440131494114,60.697393258620764 35.69648063892992,58.649663227222234 36.03631222929628,57.51651816332607 C36.37615382530363,56.38336112419037 40.29743456625612,54.37015570831445 40.16673087808759,54.37015570831445 C40.03601718427808,54.37015570831445 40.13811474487456,35.69282969539551 39.831822063085156,26.528107042895826 C39.01503157267244,27.62787711426286 25.04542578370245,26.398475075142656 25.3068331600395,28.26789379015831 z"/> </g> </symbol> <symbol id="icon-svg-zoom" viewBox="0 0 64 64"> <path fill="none" stroke="currentColor" stroke-opacity="1" stroke-width="5" stroke-dasharray="none" d="M6.081632672942237,26.49781361105164 C6.081632672942237,14.778421761007806 15.3535794343025,5.285714362472299 26.80042728783369,5.285714362472299 C38.24727514136488,5.285714362472299 47.519221902725135,14.778421761007806 47.519221902725135,26.49781361105164 C47.519221902725135,38.217205461095475 38.24727514136488,47.70991285963098 26.80042728783369,47.70991285963098 C15.3535794343025,47.70991285963098 6.081632672942237,38.217205461095475 6.081632672942237,26.49781361105164 z"/> <path fill="currentColor" fill-opacity="1" stroke="none" stroke-width="5" stroke-dasharray="none" d="M47.57201,46.8569C47.57201,39.78653 49.67081,41.07243 52.84861,41.07243C56.0264,41.07243 57.82607,38.87931 57.82607,45.94969C57.82607,53.02006 55.99412,65.3688 52.81633,65.3688C49.63853,65.3688 47.57201,53.92728 47.57201,46.8569z" transform="rotate(-43.57558822631836 52.81632614135741,52.57143020629882) "/> </symbol> <symbol id="icon-svg-hand" viewBox="0 0 64 64"> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="4" stroke-dasharray="none" d="M17.71085,59.21506C16.279,58.53374 13.76268,56.57038 11.49558,50.66566C9.22848,44.76094 7.5442,38.09433 6.51575,34.78057C5.48729,31.46681 5.43132,26.41023 7.81773,26.18312C10.20416,25.95602 12.62547,26.98695 14.29597,30.27996C15.96646,33.57297 15.94537,36.23838 17.49654,38.05523C19.04771,39.87208 18.87497,41.12469 19.47157,37.26393C20.06817,33.40314 18.15505,14.54029 18.82325,12.16932C19.49143,9.79833 21.04129,8.76485 22.8311,9.21906C24.62092,9.67326 25.58928,9.98705 26.54385,12.25811C27.49841,14.52916 27.27033,29.75697 27.70539,30.58481C28.14046,31.41265 28.01792,31.95638 28.73063,31.78016C29.44334,31.60395 27.2928,6.75349 28.5576,5.17738C29.82241,3.60128 32.2575,3.08723 32.49614,2.97368C32.73478,2.86013 35.49296,3.29644 36.56685,5.22683C37.64073,7.15721 37.77062,29.85261 37.9987,31.0032C38.22678,32.1538 37.76738,31.70881 38.31854,30.99168C38.86971,30.27456 37.47313,10.67861 37.53646,8.99323C37.59977,7.30786 40.91196,6.15315 41.7472,6.2667C42.58244,6.38024 44.4604,5.97652 45.60588,8.26121C46.75137,10.54588 45.90539,29.13411 46.6567,30.89393C47.40802,32.65375 46.57604,32.15664 46.94134,31.15257C47.30664,30.14849 47.23277,18.97559 47.9487,16.8181C48.66462,14.66062 50.5242,13.1604 51.71742,13.84172C52.91064,14.52304 53.65868,14.64233 54.80417,18.17607C55.94967,21.70982 55.04787,37.60714 54.21262,42.14923C53.37737,46.69132 51.22958,54.07222 49.6784,56.34327C48.12722,58.61432 48.72385,60.88536 44.07031,60.77181C39.41676,60.65825 28.66777,61.88905 23.85451,61.08093C19.04125,60.27281 19.14271,59.89638 17.71085,59.21506z"/> </symbol> <symbol id="icon-svg-flip-h" viewBox="0 0 64 64"> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="4" stroke-dasharray="none" d="M3.0204,4.9102L2.85714,59.18367L26.93877,44.79592L27.14286,20.71429L3.0204,4.9102z"/> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="2" stroke-dasharray="5,5" d="M36.99999732625961,21.032652452020645 L61.12244732625961,2.4489824520206454 L60.91836732625961,61.22449245202065 L36.63265732625961,44.08163245202064 L36.99999732625961,21.032652452020645 z"/> </symbol> <symbol id="icon-svg-flip-v" viewBox="0 0 64 64"> <g transform="rotate(89.67710876464844 32.04081344604492,32.34693908691406) "> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="4" stroke-dasharray="none" d="M3.0204,4.9102L2.85714,59.18367L26.93877,44.79592L27.14286,20.71429L3.0204,4.9102z"/> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="2" stroke-dasharray="5,5" d="M37.102036663417806,21.542856588392258 L61.22448666341782,2.959186588392258 L61.020406663417816,61.73469658839226 L36.73469666341782,44.591836588392255 L37.102036663417806,21.542856588392258 z"/> </g> </symbol> <symbol id="icon-svg-key" viewBox="0 0 64 64"> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="6" stroke-dasharray="none" d="M13.775956782165487,17.97814177133719 C13.775956782165487,11.058478845258687 21.44727256809513,5.4535518751351 30.9180327976379,5.4535518751351 C40.38879302718067,5.4535518751351 48.06010881311031,11.058478845258687 48.06010881311031,17.97814177133719 C48.06010881311031,24.897804697415687 40.38879302718067,30.502731667539276 30.9180327976379,30.502731667539276 C21.44727256809513,30.502731667539276 13.775956782165487,24.897804697415687 13.775956782165487,17.97814177133719 z"/> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="6" stroke-dasharray="none" d="M30.797814157530333,30.574864062319236L30.797814157530333,60.73879974610375"/> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="6" stroke-dasharray="none" d="M33.20218507247344,46.640438274130446 L40.852458823915676,46.640438274130446 "/> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="6" stroke-dasharray="none" d="M32.54644817072495,57.678690352127184 L45.11475470563517,57.678690352127184 "/> </symbol> <symbol id="icon-svg-blank-key" viewBox="0 0 64 64"> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="6" stroke-dasharray="none" d="M10.666666800183314,31.486339257838807 C10.666666800183314,20.59662505896233 19.96297106134084,11.77595655787238 31.439889902276057,11.77595655787238 C42.91680874321127,11.77595655787238 52.2131130043688,20.59662505896233 52.2131130043688,31.486339257838807 C52.2131130043688,42.37605345671529 42.91680874321127,51.19672195780524 31.439889902276057,51.19672195780524 C19.96297106134084,51.19672195780524 10.666666800183314,42.37605345671529 10.666666800183314,31.486339257838807 z"/> </symbol> <symbol id="icon-svg-insert-frame" viewBox="0 0 64 64"> <rect fill="currentColor" stroke-width="6" x="0.37704911828041077" y="37.617488861083984" width="15.672130584716797" height="25.775955200195312"/> <rect fill="currentColor" stroke-width="6" x="47.59016418457031" y="37.726776123046875" width="15.672130584716797" height="25.775955200195312"/> <rect fill="none" stroke="currentColor" stroke-width="4" x="25.387981414794922" y="2.6612037420272827" width="14" height="21.38251304626465"/> <path fill="currentColor" stroke-width="4" marker-start="" marker-mid="" marker-end="" d="M30.795874375427537,50.2755496068782 L34.95454940301087,46.102673672098945 L26.913954203912873,46.102673672098945 L18.873376608518317,46.102673672098945 L18.873376608518317,43.519465807931915 L18.873376608518317,40.93625530320949 L26.821712560655,40.93625530320949 C31.193291173034055,40.93625530320949 34.77004235149582,40.805326001907034 34.77004235149582,40.6453004201302 C34.77004235149582,40.485278359093186 33.02973059261079,38.607483440285016 30.90268748382902,36.47242536553582 L27.035320293570102,32.590500793095856 L30.60994934563731,32.590500793095856 L34.184565194926975,32.590500793095856 L39.64381324126283,38.060216881410774 L45.10305864704398,43.52993032916967 L39.63334079835929,48.989178375506306 L34.1636247100445,54.448426421842186 L30.400409828481394,54.448426421842186 L26.637186145067027,54.448426421842186 L30.795872615057156,50.27554872669295 L30.795874375427537,50.2755496068782 z" transform="rotate(89.86576080322266 31.98821640014648,43.51945877075195) "/> </symbol> <symbol id="icon-svg-delete-frame" viewBox="0 0 64 64"> <rect fill="currentColor" stroke-width="6" x="0.37704911828041077" y="37.617488861083984" width="15.672130584716797" height="25.775955200195312"/> <rect fill="currentColor" stroke-width="6" x="47.59016418457031" y="37.726776123046875" width="15.672130584716797" height="25.775955200195312"/> <path fill="currentColor" stroke-width="6" marker-start="" marker-mid="" marker-end="" d="M17.50363,8.34729L23.11129,2.9681L32.80413,12.78006L41.95052,3.84242L46.79325,9.00303L37.20969,18.05003L46.13751,27.09704L40.96692,32.36702L31.71124,23.32001L22.56485,32.91346L17.17576,27.5342L26.43136,18.05003L17.50363,8.34729z"/> <rect fill="none" stroke="currentColor" stroke-width="4" x="25.278688430786133" y="39.92896270751953" width="14" height="21.38251304626465"/> </symbol> <symbol id="icon-svg-add-layer" viewBox="0 0 64 64"> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="6" stroke-dasharray="none" d="M3.6247651895771877,47.72441686052258 C4.473244208724902,47.46680327209842 30.101467010623484,32.012647296430444 31.436023093943483,31.838254558587757 C32.77056868654254,31.663861820745055 60.67956863793463,47.10481997394684 60.472848981753096,47.81028805666397 C60.266139816292515,48.515756139381104 32.4164858732749,60.74934695396852 31.6434246469863,60.59135940593062 C30.87036342069771,60.433353889448234 2.776286170429473,47.982030448946745 3.6247651895771877,47.72441686052258 z"/> <path fill="currentColor" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="6" stroke-dasharray="none" d="M18.69950914310932,11.345815819854739 L43.33004914310932,11.444335819854736 "/> <path fill="currentColor" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="6" stroke-dasharray="none" d="M30.9162561027544,0.015763947262822597 L30.9162561027544,23.069952005831773 "/> </symbol> <symbol id="icon-svg-delete-layer" viewBox="0 0 64 64"> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="6" stroke-dasharray="none" d="M3.6247651895771877,47.72441686052258 C4.473244208724902,47.46680327209842 30.101467010623484,32.012647296430444 31.436023093943483,31.838254558587757 C32.77056868654254,31.663861820745055 60.67956863793463,47.10481997394684 60.472848981753096,47.81028805666397 C60.266139816292515,48.515756139381104 32.4164858732749,60.74934695396852 31.6434246469863,60.59135940593062 C30.87036342069771,60.433353889448234 2.776286170429473,47.982030448946745 3.6247651895771877,47.72441686052258 z"/> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="6" stroke-dasharray="none" d="M22.443346514134408,3.266992628974915 L41.753696514134404,21.887682628974915 "/> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="6" stroke-dasharray="none" d="M22.54187,21.4936L41.26108,3.16847"/> </symbol> <symbol id="icon-svg-merge-layers" viewBox="0 0 64 64"> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="4" stroke-dasharray="none" d="M3.526243018199052,48.51259424644883 C4.374722037346766,48.254980658024664 30.002944839245348,32.80082468235669 31.337500922565347,32.626431944514 C32.6720465151644,32.4520392066713 60.581046466556494,47.892997359873085 60.37432681037496,48.59846544259022 C60.16761764491438,49.30393352530735 32.317963701896765,61.537524339894766 31.544902475608165,61.379536791856864 C30.771841249319575,61.22153127537448 2.6777639990513373,48.77020783487299 3.526243018199052,48.51259424644883 z"/> <path fill="currentColor" stroke-width="6" marker-start="" marker-mid="" marker-end="" d="M30.468197314719898,21.625636737917745 L34.88260845499934,17.196151411146253 L26.347559963366674,17.196151411146253 L17.812530157969928,17.196151411146253 L17.812530157969928,14.454090178278136 L17.812530157969928,11.712026142474516 L26.249645955925583,11.712026142474516 C30.890053104617444,11.712026142474516 34.68675521369806,11.573045394417857 34.68675521369806,11.40317910136982 C34.68675521369806,11.233316545569318 32.83942365616551,9.240047354357182 30.58157885392064,6.973694708910681 L26.476389413773738,2.8530526859970546 L30.270838897120615,2.8530526859970546 L34.06527436578459,2.8530526859970546 L39.860236759683545,8.659126850067635 L45.655196350647415,14.465198211202996 L39.849120317954856,20.260160605101735 L34.04304615388094,26.05512299900049 L30.048413828381342,26.05512299900049 L26.05377215976568,26.05512299900049 L30.46819544609534,21.62563580360578 L30.468197314719898,21.625636737917745 z" transform="rotate(90.4974365234375 31.733863830566403,14.45408821105957) "/> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="4" stroke-dasharray="none" d="M22.44334,26.32119C20.66995,27.52749 3.33005,36.99682 2.93596,37.98204C2.54187,38.96727 31.60591,51.05025 31.60591,51.05025C31.60591,51.05025 59.72413,39.15617 60,38.26753C60.27586,37.3789 42.04926,27.42695 41.37931,26.7072"/> </symbol> <symbol id="icon-svg-copy-layer" viewBox="0 0 64 64"> <path fill="none" fill-opacity="1" stroke="currentColor" stroke-opacity="1" stroke-width="4" stroke-dasharray="none" d="M3.7232873162518416,29.596335553707434 C4.571766335399553,29.33872196528327 30.199989137298132,13.884565989615297 31.534545220618135,13.71017325177261 C32.86909081321719,13.535780513929907 60.77809076460929,28.976738667131684 60.57137110842774,29.68220674984883 C60.36466194296716,30.38767483256595 32.51500799994955,42.621265647153365 31.741946773660956,42.46327809911547 C30.968885547372366,42.30527258263308 2.874808297104124,29.853949142131597 3.7232873162518416,29.596335553707434 z"/> <path fill="currentColor" fill-opacity="1" stroke="none" stroke-opacity="1" stroke-width="4" stroke-dasharray="none" d="M13.323887963467484,40.424561391274366 C12.393755179804213,40.20470805390063 1.7488905558523,46.58059988916938 1.8522468016787825,47.78981556032959 C1.9556030475052655,48.999031231489816 29.1361243060931,63.06995724187438 30.99640036324466,63.06995724187438 C32.85666593057121,63.06995724187438 63.44768105580772,48.77917789411608 63.03428754197681,47.679888891642726 C62.62089402814591,46.58058873136703 52.01738029438461,40.71916084654632 51.066582555451035,40.29703886829201 C50.115784816517476,39.874916890037696 32.96001168657267,48.999031231489816 31.616485389078505,48.88910456280295 C30.272959091584333,48.77916673631374 14.254010257305747,40.6444147286481 13.323877473642474,40.424561391274366 z"/> </symbol> <symbol id="icon-svg-trash" viewBox="0 0 640 640"> <path fill="currentColor" d="M505.15 581.3L504.91 583.71L504.57 586.08L504.14 588.43L503.61 590.74L503 593.02L502.31 595.27L501.52 597.47L500.66 599.63L499.71 601.75L498.69 603.83L497.59 605.86L496.41 607.84L495.16 609.77L493.83 611.65L492.44 613.47L490.98 615.24L489.46 616.95L487.87 618.6L486.22 620.19L484.51 621.71L482.74 623.17L480.92 624.56L479.04 625.89L477.11 627.14L475.13 628.31L473.1 629.42L471.02 630.44L468.9 631.39L466.74 632.25L464.54 633.03L462.29 633.73L460.02 634.34L457.7 634.86L455.35 635.3L452.98 635.63L450.57 635.88L448.14 636.03L445.68 636.08L160.43 636.08L158.5 636.04L156.59 635.92L154.7 635.73L152.84 635.46L150.99 635.13L149.18 634.72L147.39 634.24L145.63 633.69L143.9 633.08L142.21 632.4L140.54 631.66L138.91 630.85L137.32 629.99L135.77 629.06L134.25 628.08L132.78 627.04L131.35 625.95L129.96 624.81L128.62 623.61L127.32 622.36L126.08 621.07L124.88 619.73L123.74 618.34L122.65 616.91L121.61 615.44L120.63 613.92L119.7 612.37L118.84 610.78L118.03 609.15L117.29 607.48L116.61 605.79L116 604.06L115.45 602.3L114.97 600.51L114.56 598.7L114.23 596.85L113.96 594.99L113.77 593.1L113.65 591.19L113.61 589.26L113.61 163.35L505.35 163.35L505.35 576.4L505.3 578.86L505.3 578.86L505.15 581.3ZM164.17 554.87L164.26 556.32L164.4 557.76L164.6 559.18L164.86 560.58L165.17 561.97L165.54 563.33L165.95 564.67L166.42 565.98L166.94 567.28L167.5 568.54L168.12 569.78L168.78 571L169.48 572.18L170.23 573.33L171.02 574.45L171.85 575.54L172.72 576.6L173.63 577.62L174.58 578.61L175.57 579.56L176.59 580.47L177.64 581.34L178.73 582.17L179.86 582.96L181.01 583.71L182.19 584.41L183.41 585.07L184.65 585.68L185.91 586.25L187.21 586.77L188.52 587.23L189.86 587.65L191.22 588.02L192.61 588.33L194.01 588.59L195.43 588.79L196.87 588.93L198.32 589.02L199.79 589.05L409.38 589.05L411.25 589.01L413.1 588.9L414.94 588.72L416.75 588.46L418.54 588.13L420.3 587.73L422.03 587.27L423.74 586.74L425.42 586.14L427.07 585.48L428.68 584.76L430.26 583.98L431.81 583.14L433.32 582.24L434.79 581.29L436.22 580.28L437.61 579.22L438.95 578.11L440.26 576.95L441.51 575.74L442.72 574.48L443.88 573.18L445 571.84L446.06 570.45L447.06 569.02L448.01 567.55L448.91 566.04L449.75 564.49L450.53 562.91L451.25 561.3L451.91 559.65L452.51 557.97L453.04 556.26L453.5 554.53L453.9 552.76L454.23 550.98L454.49 549.17L454.67 547.33L454.79 545.48L454.82 543.61L454.82 216.32L164.14 216.32L164.14 553.4L164.14 553.4L164.17 554.87Z"/> <path fill="currentColor" d="M68.16 70.79L548.32 70.79L548.32 131.94L68.16 131.94L68.16 70.79Z"/> <path fill="currentColor" d="M259.89 9.63L359.07 9.63L359.07 78.23L259.89 78.23L259.89 9.63Z"/> <path fill="currentColor" d="M218.57 252.61L279.73 252.61L279.73 552.61L218.57 552.61L218.57 252.61Z"/> <path fill="currentColor" d="M333.53 252.61L394.69 252.61L394.69 552.61L333.53 552.61L333.53 252.61Z"/> </symbol> <symbol id="icon-svg-pencil" viewBox="0 0 640 640"> <path fill="currentColor" d="M279.28 486.03L277.6 487.6L275.88 489.08L274.1 490.49L272.29 491.81L270.44 493.05L268.55 494.21L266.63 495.28L264.67 496.27L262.69 497.19L260.68 498.01L258.64 498.76L256.59 499.43L254.51 500.01L252.42 500.51L250.31 500.93L248.19 501.27L246.07 501.53L243.93 501.7L241.79 501.79L239.65 501.8L237.52 501.73L235.38 501.58L233.25 501.35L231.13 501.03L229.03 500.64L226.93 500.16L224.85 499.6L222.8 498.96L220.76 498.24L218.74 497.43L216.76 496.55L214.8 495.58L212.87 494.54L210.98 493.41L209.12 492.2L207.31 490.91L205.53 489.54L203.8 488.09L202.12 486.55L200.48 484.94L137.18 419.86L135.66 418.24L134.23 416.57L132.87 414.86L131.59 413.11L130.4 411.32L129.28 409.49L128.24 407.64L127.28 405.75L126.4 403.83L125.6 401.89L124.88 399.92L124.24 397.94L123.67 395.93L123.19 393.91L122.78 391.87L122.46 389.83L122.21 387.77L122.04 385.71L121.95 383.65L121.94 381.58L122.01 379.52L122.15 377.45L122.38 375.4L122.68 373.35L123.07 371.32L123.53 369.29L124.07 367.28L124.69 365.3L125.38 363.33L126.16 361.38L127.01 359.46L127.95 357.57L128.96 355.71L130.05 353.88L131.22 352.09L132.46 350.33L133.79 348.62L135.19 346.95L136.67 345.32L138.23 343.74L389.09 99.73L528.78 243.34L279.28 486.03ZM494.29 24.24L496.4 24.47L498.49 24.78L500.58 25.17L502.65 25.65L504.7 26.2L506.74 26.83L508.75 27.55L510.74 28.34L512.71 29.22L514.64 30.17L516.55 31.21L518.42 32.32L520.25 33.52L522.05 34.79L523.81 36.15L525.52 37.58L527.18 39.1L528.8 40.69L591.66 105.32L593.21 106.98L594.68 108.69L596.07 110.44L597.38 112.23L598.6 114.06L599.74 115.93L600.81 117.83L601.79 119.76L602.69 121.72L603.51 123.71L604.25 125.73L604.91 127.76L605.48 129.81L605.98 131.88L606.39 133.96L606.73 136.06L606.98 138.16L607.15 140.27L607.25 142.38L607.26 144.5L607.19 146.61L607.04 148.72L606.81 150.83L606.49 152.92L606.1 155.01L605.63 157.08L605.08 159.13L604.44 161.17L603.73 163.18L602.94 165.17L602.06 167.14L601.11 169.07L600.07 170.98L598.96 172.85L597.76 174.68L596.49 176.48L595.13 178.23L593.69 179.95L592.18 181.61L590.58 183.23L567.42 205.76L427.73 62.15L450.89 39.62L452.55 38.07L454.26 36.6L456.01 35.21L457.8 33.9L459.63 32.68L461.5 31.53L463.4 30.47L465.33 29.49L467.3 28.59L469.28 27.77L471.3 27.03L473.33 26.37L475.38 25.79L477.45 25.3L479.53 24.88L481.63 24.55L483.73 24.3L485.84 24.12L487.95 24.03L490.07 24.02L492.18 24.09L494.29 24.24Z"/> <path fill="currentColor" d="M191.94 519.91L40.02 583.97L107.56 433.16L191.94 519.91Z"/> </symbol> <symbol id="icon-svg-play" viewBox="0 0 640 640"> <path fill="currentColor" d="M571.85 59.88L574.38 60.13L576.87 60.49L579.34 60.94L581.76 61.49L584.15 62.13L586.51 62.86L588.82 63.68L591.09 64.59L593.31 65.58L595.49 66.66L597.61 67.81L599.69 69.05L601.72 70.36L603.69 71.75L605.6 73.21L607.46 74.74L609.25 76.34L610.98 78L612.65 79.73L614.25 81.53L615.78 83.38L617.24 85.3L618.62 87.27L619.94 89.29L621.17 91.37L622.33 93.5L623.4 95.68L624.4 97.9L625.3 100.17L626.12 102.48L626.86 104.83L627.5 107.22L628.04 109.65L628.5 112.11L628.85 114.61L629.11 117.13L629.26 119.68L629.32 122.26L629.32 513.65L629.26 516.39L629.09 519.11L628.82 521.8L628.44 524.46L627.96 527.08L627.38 529.67L626.69 532.22L625.92 534.72L625.04 537.19L624.07 539.6L623.02 541.97L621.87 544.29L620.64 546.56L619.32 548.77L617.93 550.93L616.45 553.03L614.89 555.07L613.26 557.04L611.56 558.95L609.78 560.8L607.94 562.57L606.03 564.28L604.05 565.91L602.01 567.46L599.91 568.94L597.76 570.34L595.54 571.66L593.28 572.89L590.96 574.03L588.59 575.09L586.17 576.06L583.71 576.93L581.2 577.71L578.66 578.39L576.07 578.98L573.45 579.46L570.79 579.84L568.1 580.11L565.38 580.27L562.63 580.33L77.74 580.33L74.65 580.27L71.6 580.08L68.58 579.78L65.59 579.35L62.65 578.81L59.74 578.15L56.89 577.39L54.07 576.51L51.31 575.53L48.59 574.45L45.93 573.26L43.33 571.97L40.78 570.59L38.3 569.11L35.88 567.54L33.52 565.89L31.23 564.14L29.01 562.31L26.87 560.4L24.8 558.4L22.8 556.33L20.89 554.19L19.06 551.97L17.31 549.68L15.65 547.32L14.09 544.9L12.61 542.42L11.23 539.87L9.94 537.27L8.75 534.61L7.67 531.89L6.69 529.13L5.81 526.31L5.04 523.46L4.39 520.55L3.85 517.61L3.42 514.62L3.12 511.6L2.93 508.55L2.87 505.46L2.87 153.82L2.95 149.94L3.18 146.1L3.57 142.3L4.1 138.55L4.78 134.85L5.61 131.2L6.57 127.6L7.67 124.06L8.9 120.59L10.27 117.17L11.76 113.83L13.38 110.55L15.12 107.35L16.97 104.23L18.95 101.18L21.03 98.22L23.23 95.34L25.53 92.55L27.94 89.85L30.45 87.25L33.05 84.74L35.75 82.33L38.54 80.03L41.42 77.84L44.38 75.75L47.43 73.78L50.55 71.92L53.75 70.18L57.03 68.56L60.37 67.07L63.78 65.7L67.26 64.47L70.8 63.37L74.39 62.41L78.05 61.58L81.75 60.9L85.5 60.37L89.3 59.98L93.14 59.75L97.02 59.67L566.72 59.67L569.3 59.72L571.85 59.88ZM470.41 302.56L230.14 142.09L230.14 486.34L470.41 302.56Z"/> </symbol> <symbol id="icon-svg-warning" viewBox="0 0 640 640"> <path fill="currentColor" d="M321.08 27.71L323.58 28.03L326.07 28.48L328.54 29.05L330.97 29.76L333.37 30.61L335.73 31.58L338.04 32.68L340.29 33.91L342.49 35.28L344.62 36.77L346.68 38.4L348.65 40.16L350.55 42.05L352.35 44.07L354.06 46.22L355.67 48.5L357.17 50.92L358.55 53.46L607.46 544.37L608.7 546.99L609.78 549.62L610.71 552.27L611.49 554.93L612.11 557.6L612.59 560.26L612.92 562.93L613.12 565.59L613.17 568.23L613.09 570.86L612.87 573.47L612.53 576.06L612.05 578.61L611.45 581.13L610.73 583.61L609.89 586.05L608.93 588.45L607.86 590.79L606.68 593.07L605.38 595.29L603.99 597.45L602.48 599.54L600.88 601.56L599.18 603.49L597.39 605.35L595.5 607.11L593.52 608.79L591.46 610.36L589.31 611.84L587.08 613.21L584.77 614.48L582.39 615.63L579.93 616.66L577.4 617.56L574.8 618.34L572.14 618.99L569.42 619.5L566.64 619.87L563.8 620.1L560.9 620.18L83.52 620.18L80.4 620.09L77.33 619.85L74.33 619.45L71.38 618.9L68.51 618.2L65.7 617.36L62.97 616.39L60.31 615.28L57.73 614.04L55.24 612.68L52.82 611.21L50.5 609.61L48.26 607.92L46.12 606.11L44.07 604.21L42.13 602.21L40.28 600.13L38.54 597.95L36.91 595.7L35.39 593.38L33.98 590.98L32.7 588.52L31.53 585.99L30.48 583.41L29.56 580.78L28.76 578.1L28.1 575.38L27.58 572.62L27.19 569.83L26.94 567.01L26.83 564.17L26.87 561.31L27.06 558.44L27.41 555.56L27.9 552.67L28.56 549.78L29.38 546.91L30.36 544.04L31.5 541.18L32.82 538.35L273.73 53.8L275.1 51.24L276.57 48.81L278.16 46.52L279.85 44.35L281.64 42.32L283.52 40.42L285.49 38.64L287.53 37L289.65 35.49L291.83 34.1L294.08 32.85L296.38 31.73L298.73 30.74L301.12 29.88L303.55 29.15L306.01 28.55L308.5 28.09L311 27.75L313.52 27.54L316.04 27.47L318.56 27.52L321.08 27.71ZM316.14 475.08L314.24 475.27L312.36 475.54L310.51 475.88L308.69 476.29L306.89 476.77L305.12 477.32L303.38 477.94L301.67 478.62L300 479.37L298.36 480.18L296.76 481.05L295.19 481.98L293.67 482.97L292.19 484.01L290.75 485.11L289.35 486.27L288 487.47L286.7 488.72L285.44 490.03L284.24 491.38L283.09 492.77L281.99 494.21L280.94 495.7L279.95 497.22L279.02 498.78L278.15 500.39L277.34 502.02L276.6 503.7L275.91 505.41L275.3 507.14L274.74 508.91L274.26 510.71L273.85 512.54L273.51 514.39L273.24 516.27L273.05 518.17L272.93 520.09L272.89 522.03L272.93 523.97L273.05 525.89L273.24 527.79L273.51 529.66L273.85 531.52L274.26 533.34L274.74 535.14L275.3 536.91L275.91 538.65L276.6 540.36L277.34 542.03L278.15 543.67L279.02 545.27L279.95 546.83L280.94 548.36L281.99 549.84L283.09 551.28L284.24 552.68L285.44 554.03L286.7 555.33L288 556.59L289.35 557.79L290.75 558.94L292.19 560.04L293.67 561.09L295.19 562.07L296.76 563L298.36 563.87L300 564.68L301.67 565.43L303.38 566.11L305.12 566.73L306.89 567.28L308.69 567.76L310.51 568.18L312.36 568.52L314.24 568.79L316.14 568.98L318.06 569.1L320 569.13L321.94 569.1L323.86 568.98L325.76 568.79L327.64 568.52L329.49 568.18L331.31 567.76L333.11 567.28L334.88 566.73L336.62 566.11L338.33 565.43L340 564.68L341.64 563.87L343.24 563L344.81 562.07L346.33 561.09L347.81 560.04L349.25 558.94L350.65 557.79L352 556.59L353.3 555.33L354.56 554.03L355.76 552.68L356.91 551.28L358.01 549.84L359.06 548.36L360.05 546.83L360.98 545.27L361.85 543.67L362.66 542.03L363.4 540.36L364.09 538.65L364.7 536.91L365.26 535.14L365.74 533.34L366.15 531.52L366.49 529.66L366.76 527.79L366.95 525.89L367.07 523.97L367.11 522.03L367.07 520.09L366.95 518.17L366.76 516.27L366.49 514.39L366.15 512.54L365.74 510.71L365.26 508.91L364.7 507.14L364.09 505.41L363.4 503.7L362.66 502.02L361.85 500.39L360.98 498.78L360.05 497.22L359.06 495.7L358.01 494.21L356.91 492.77L355.76 491.38L354.56 490.03L353.3 488.72L352 487.47L350.65 486.27L349.25 485.11L347.81 484.01L346.33 482.97L344.81 481.98L343.24 481.05L341.64 480.18L340 479.37L338.33 478.62L336.62 477.94L334.88 477.32L333.11 476.77L331.31 476.29L329.49 475.88L327.64 475.54L325.76 475.27L323.86 475.08L321.94 474.96L320 474.92L318.06 474.96L316.14 475.08ZM307.9 175.81L306.52 175.9L305.15 176.04L303.8 176.23L302.46 176.47L301.15 176.77L299.85 177.12L298.58 177.51L297.32 177.96L296.09 178.45L294.89 178.99L293.71 179.57L292.55 180.2L291.43 180.87L290.33 181.58L289.26 182.33L288.23 183.12L287.22 183.95L286.25 184.82L285.31 185.72L284.41 186.66L283.54 187.63L282.71 188.64L281.92 189.68L281.17 190.74L280.45 191.84L279.79 192.97L279.16 194.12L278.58 195.3L278.04 196.51L277.55 197.74L277.1 198.99L276.71 200.26L276.36 201.56L276.06 202.87L275.82 204.21L275.62 205.56L275.48 206.93L275.4 208.31L275.37 209.71L275.37 403.31L275.4 404.6L275.48 405.87L275.6 407.12L275.78 408.36L276 409.59L276.28 410.8L276.6 411.99L276.96 413.16L277.37 414.31L277.82 415.44L278.31 416.54L278.85 417.63L279.42 418.69L280.04 419.72L280.69 420.73L281.38 421.71L282.11 422.66L282.87 423.58L283.67 424.48L284.5 425.34L285.36 426.17L286.25 426.96L287.17 427.73L288.13 428.45L289.11 429.14L290.11 429.8L291.15 430.41L292.21 430.99L293.29 431.52L294.4 432.01L295.53 432.47L296.68 432.87L297.85 433.24L299.04 433.56L300.25 433.83L301.47 434.06L302.71 434.23L303.97 434.36L305.24 434.44L306.52 434.46L338.44 434.46L339.72 434.44L340.99 434.36L342.25 434.23L343.49 434.06L344.71 433.83L345.92 433.56L347.11 433.24L348.28 432.87L349.43 432.47L350.56 432.01L351.67 431.52L352.75 430.99L353.81 430.41L354.84 429.8L355.85 429.14L356.83 428.45L357.79 427.73L358.71 426.96L359.6 426.17L360.46 425.34L361.29 424.48L362.09 423.58L362.85 422.66L363.58 421.71L364.27 420.73L364.92 419.72L365.53 418.69L366.11 417.63L366.64 416.54L367.14 415.44L367.59 414.31L368 413.16L368.36 411.99L368.68 410.8L368.95 409.59L369.18 408.36L369.36 407.12L369.48 405.87L369.56 404.6L369.59 403.31L369.59 211.38L369.56 209.91L369.47 208.46L369.32 207.02L369.12 205.6L368.86 204.2L368.55 202.82L368.19 201.47L367.77 200.13L367.31 198.81L366.79 197.52L366.23 196.26L365.61 195.02L364.96 193.81L364.25 192.63L363.51 191.48L362.72 190.36L361.89 189.27L361.02 188.21L360.11 187.19L359.16 186.21L358.18 185.26L357.16 184.35L356.1 183.48L355.01 182.65L353.89 181.86L352.74 181.12L351.56 180.42L350.35 179.76L349.11 179.15L347.85 178.58L346.56 178.07L345.24 177.6L343.91 177.18L342.55 176.82L341.17 176.51L339.77 176.25L338.35 176.05L336.91 175.9L335.46 175.81L333.99 175.79L309.3 175.79L307.9 175.81Z"/> </symbol> <symbol id="icon-svg-bars" viewBox="0 0 640 640"> <path fill="currentColor" d="M118.44 125.93L521.56 125.93L521.56 204.13L118.44 204.13L118.44 125.93Z"/> <path fill="currentColor" d="M118.44 291.38L521.56 291.38L521.56 369.59L118.44 369.59L118.44 291.38Z"/> <path fill="currentColor" d="M118.44 454.19L521.56 454.19L521.56 532.39L118.44 532.39L118.44 454.19Z"/> </symbol> <symbol id="icon-svg-save" viewBox="0 0 640 640"> <path fill="currentColor" d="M627.85 593.13L627.78 594.44L627.65 595.73L627.47 597.01L627.25 598.27L626.97 599.51L626.65 600.74L626.28 601.94L625.86 603.13L625.4 604.29L624.9 605.43L624.35 606.55L623.76 607.64L623.14 608.71L622.47 609.74L621.76 610.75L621.02 611.74L620.24 612.69L619.42 613.61L618.57 614.5L617.68 615.35L616.77 616.17L615.82 616.96L614.84 617.71L613.84 618.42L612.8 619.09L611.74 619.73L610.65 620.32L609.54 620.87L608.4 621.38L607.24 621.85L606.05 622.27L604.85 622.64L603.63 622.97L602.39 623.25L601.13 623.49L599.85 623.67L598.56 623.8L597.25 623.88L595.93 623.91L52.73 623.91L51.29 623.88L49.87 623.79L48.46 623.65L47.07 623.45L45.7 623.2L44.35 622.89L43.02 622.54L41.71 622.13L40.42 621.67L39.16 621.17L37.92 620.61L36.71 620.02L35.52 619.37L34.37 618.68L33.24 617.95L32.14 617.18L31.07 616.37L30.04 615.52L29.04 614.62L28.08 613.7L27.15 612.73L26.26 611.73L25.41 610.7L24.59 609.63L23.82 608.54L23.09 607.41L22.4 606.25L21.76 605.07L21.16 603.85L20.61 602.62L20.1 601.35L19.65 600.07L19.24 598.76L18.88 597.42L18.58 596.07L18.32 594.7L18.13 593.31L17.98 591.91L17.9 590.48L17.87 589.05L17.87 47.64L17.89 46.34L17.97 45.05L18.1 43.78L18.28 42.52L18.51 41.28L18.79 40.06L19.11 38.85L19.48 37.67L19.89 36.5L20.35 35.36L20.85 34.24L21.39 33.14L21.97 32.07L22.59 31.02L23.26 30L23.95 29.01L24.69 28.04L25.46 27.11L26.27 26.21L27.11 25.33L27.98 24.49L28.88 23.69L29.82 22.92L30.78 22.18L31.78 21.48L32.8 20.82L33.84 20.2L34.92 19.61L36.01 19.07L37.13 18.57L38.28 18.12L39.44 17.7L40.63 17.33L41.83 17.01L43.06 16.73L44.3 16.51L45.55 16.33L46.83 16.2L48.11 16.12L49.41 16.09L535.93 16.09L625.55 112.34L627.87 591.81L627.87 591.81L627.85 593.13ZM310.59 367.4L306.59 367.97L302.64 368.7L298.75 369.58L294.92 370.6L291.14 371.78L287.44 373.1L283.8 374.55L280.23 376.14L276.74 377.87L273.32 379.73L269.99 381.71L266.74 383.81L263.58 386.04L260.51 388.38L257.54 390.84L254.66 393.41L251.88 396.08L249.21 398.86L246.64 401.74L244.18 404.71L241.84 407.78L239.61 410.94L237.51 414.19L235.53 417.52L233.67 420.94L231.94 424.43L230.35 428L228.9 431.64L227.58 435.34L226.4 439.12L225.38 442.95L224.5 446.84L223.77 450.79L223.2 454.79L222.79 458.84L222.54 462.93L222.46 467.07L222.54 471.21L222.79 475.3L223.2 479.35L223.77 483.35L224.5 487.29L225.38 491.19L226.4 495.02L227.58 498.79L228.9 502.5L230.35 506.14L231.94 509.71L233.67 513.2L235.53 516.61L237.51 519.95L239.61 523.19L241.84 526.36L244.18 529.43L246.64 532.4L249.21 535.28L251.88 538.06L254.66 540.73L257.54 543.3L260.51 545.75L263.58 548.1L266.74 550.32L269.99 552.43L273.32 554.41L276.74 556.27L280.23 557.99L283.8 559.59L287.44 561.04L291.14 562.36L294.92 563.53L298.75 564.56L302.64 565.44L306.59 566.17L310.59 566.74L314.64 567.15L318.73 567.4L322.87 567.48L327 567.4L331.1 567.15L335.15 566.74L339.15 566.17L343.09 565.44L346.99 564.56L350.82 563.53L354.59 562.36L358.3 561.04L361.94 559.59L365.51 557.99L369 556.27L372.41 554.41L375.75 552.43L378.99 550.32L382.16 548.1L385.23 545.75L388.2 543.3L391.08 540.73L393.86 538.06L396.53 535.28L399.1 532.4L401.55 529.43L403.9 526.36L406.12 523.19L408.23 519.95L410.21 516.61L412.07 513.2L413.79 509.71L415.39 506.14L416.84 502.5L418.16 498.79L419.33 495.02L420.36 491.19L421.24 487.29L421.97 483.35L422.54 479.35L422.95 475.3L423.2 471.21L423.28 467.07L423.2 462.93L422.95 458.84L422.54 454.79L421.97 450.79L421.24 446.84L420.36 442.95L419.33 439.12L418.16 435.34L416.84 431.64L415.39 428L413.79 424.43L412.07 420.94L410.21 417.52L408.23 414.19L406.12 410.94L403.9 407.78L401.55 404.71L399.1 401.74L396.53 398.86L393.86 396.08L391.08 393.41L388.2 390.84L385.23 388.38L382.16 386.04L378.99 383.81L375.75 381.71L372.41 379.73L369 377.87L365.51 376.14L361.94 374.55L358.3 373.1L354.59 371.78L350.82 370.6L346.99 369.58L343.09 368.7L339.15 367.97L335.15 367.4L331.1 366.99L327 366.74L322.87 366.66L318.73 366.74L314.64 366.99L314.64 366.99L310.59 367.4ZM494.62 302.04L494.62 61.34L85.87 61.34L85.87 302.04L85.87 302.04L494.62 302.04Z"/> <path fill="currentColor" d="M350.71 98.72L448.23 98.72L448.23 269.03L350.71 269.03L350.71 98.72Z"/> </symbol> <symbol id="icon-svg-eye" viewBox="0 0 640 640"> <path fill="currentColor" d="M346.79 109.14L360.76 110.57L374.55 112.56L388.17 115.08L401.59 118.14L414.82 121.72L427.83 125.81L440.61 130.39L453.16 135.46L465.47 141.01L477.51 147.02L489.29 153.48L500.78 160.38L511.99 167.71L522.89 175.45L533.48 183.61L543.75 192.16L553.67 201.09L563.26 210.4L572.48 220.07L581.33 230.09L589.8 240.45L597.88 251.13L605.56 262.14L612.82 273.45L619.66 285.05L626.06 296.93L632.01 309.09L632.08 309.24L562.11 309.24L561.28 307.87L555.27 298.78L548.91 289.95L542.22 281.36L535.2 273.04L527.87 264.99L520.23 257.23L512.3 249.75L504.08 242.57L495.58 235.7L486.81 229.15L477.79 222.93L468.51 217.04L458.99 211.5L449.24 206.31L439.26 201.48L429.07 197.03L418.68 192.96L408.09 189.28L397.32 185.99L386.37 183.12L375.26 180.66L363.98 178.63L352.56 177.03L341 175.88L329.3 175.19L317.49 174.95L305.68 175.19L293.98 175.88L282.42 177.03L271 178.63L259.72 180.66L248.61 183.12L237.66 185.99L226.88 189.28L216.3 192.96L205.91 197.03L195.72 201.48L185.74 206.31L175.99 211.5L166.47 217.04L157.19 222.93L148.16 229.15L139.4 235.7L130.9 242.57L122.68 249.75L114.74 257.23L107.11 264.99L99.78 273.04L92.76 281.36L86.07 289.95L79.71 298.78L73.7 307.87L72.87 309.24L2.52 309.24L5.88 302.25L10.81 292.74L16.03 283.41L21.51 274.25L27.27 265.27L33.29 256.49L39.56 247.89L46.08 239.5L52.85 231.31L59.86 223.34L67.1 215.58L74.57 208.04L82.26 200.73L90.17 193.65L98.28 186.81L106.61 180.22L115.13 173.87L123.84 167.78L132.74 161.95L141.82 156.39L151.08 151.1L160.51 146.09L170.1 141.36L179.85 136.91L189.75 132.77L199.81 128.92L210 125.38L220.32 122.15L230.78 119.23L241.36 116.64L252.06 114.38L262.87 112.44L273.79 110.85L284.8 109.6L295.92 108.7L307.12 108.16L318.41 107.98L332.67 108.27L346.79 109.14Z"/> <path fill="currentColor" d="M626.06 319.02L619.66 330.91L612.82 342.51L605.56 353.82L597.88 364.82L589.8 375.51L581.33 385.87L572.48 395.89L563.26 405.56L553.67 414.86L543.75 423.8L533.48 432.35L522.89 440.5L511.99 448.25L500.78 455.58L489.29 462.48L477.51 468.94L465.47 474.95L453.16 480.49L440.61 485.56L427.83 490.15L414.82 494.23L401.59 497.81L388.17 500.87L374.55 503.4L360.76 505.39L346.79 506.82L332.67 507.69L318.41 507.98L307.12 507.8L295.92 507.25L284.8 506.35L273.79 505.1L262.87 503.51L252.06 501.58L241.36 499.32L230.78 496.72L220.32 493.81L210 490.58L199.81 487.04L189.76 483.19L179.85 479.04L170.1 474.6L160.51 469.87L151.08 464.86L141.82 459.57L132.74 454L123.84 448.17L115.13 442.08L106.61 435.74L98.28 429.14L90.17 422.31L82.26 415.23L74.57 407.92L67.1 400.38L59.86 392.62L52.85 384.64L46.08 376.45L39.56 368.06L33.29 359.47L27.27 350.68L21.51 341.71L16.03 332.55L10.81 323.21L5.88 313.71L2.52 306.72L72.87 306.72L73.7 308.09L79.71 317.17L86.07 326.01L92.76 334.59L99.78 342.91L107.11 350.96L114.74 358.73L122.68 366.21L130.9 373.38L139.4 380.25L148.16 386.8L157.19 393.03L166.47 398.91L175.99 404.46L185.74 409.64L195.72 414.47L205.91 418.92L216.3 423L226.88 426.68L237.66 429.96L248.61 432.84L259.72 435.29L271 437.33L282.42 438.92L293.98 440.07L305.68 440.77L317.49 441L329.3 440.77L341 440.07L352.56 438.92L363.98 437.33L375.26 435.29L386.37 432.84L397.32 429.96L408.09 426.68L418.68 423L429.07 418.92L439.26 414.47L449.24 409.64L458.99 404.46L468.51 398.91L477.79 393.03L486.81 386.8L495.58 380.25L504.08 373.38L512.3 366.21L520.24 358.73L527.87 350.96L535.2 342.91L542.22 334.59L548.91 326.01L555.27 317.17L561.28 308.09L562.11 306.72L632.08 306.72L632.01 306.87L626.06 319.02Z"/> <path fill="currentColor" d="M328.61 217.49L332.29 218.01L335.92 218.68L339.5 219.49L343.03 220.44L346.51 221.52L349.92 222.73L353.27 224.07L356.55 225.54L359.77 227.13L362.91 228.83L365.98 230.66L368.97 232.6L371.88 234.65L374.71 236.8L377.44 239.06L380.09 241.43L382.65 243.89L385.11 246.45L387.48 249.1L389.74 251.83L391.89 254.66L393.94 257.57L395.88 260.56L397.71 263.63L399.41 266.77L401 269.99L402.47 273.27L403.81 276.62L405.02 280.03L406.1 283.51L407.05 287.04L407.86 290.62L408.53 294.25L409.05 297.93L409.43 301.66L409.66 305.43L409.74 309.24L409.66 313.05L409.43 316.81L409.05 320.54L408.53 324.22L407.86 327.86L407.05 331.44L406.1 334.97L405.02 338.44L403.81 341.85L402.47 345.2L401 348.49L399.41 351.7L397.71 354.85L395.88 357.91L393.94 360.91L391.89 363.82L389.74 366.64L387.48 369.38L385.11 372.03L382.65 374.59L380.09 377.05L377.44 379.41L374.71 381.67L371.88 383.83L368.97 385.88L365.98 387.82L362.91 389.64L359.77 391.35L356.55 392.94L353.27 394.41L349.92 395.75L346.51 396.96L343.03 398.04L339.5 398.99L335.92 399.8L332.29 400.46L328.61 400.99L324.88 401.37L321.11 401.6L317.3 401.68L313.49 401.6L309.72 401.37L306 400.99L302.32 400.46L298.68 399.8L295.1 398.99L291.57 398.04L288.1 396.96L284.68 395.75L281.34 394.41L278.05 392.94L274.84 391.35L271.69 389.64L268.62 387.82L265.63 385.88L262.72 383.83L259.9 381.67L257.16 379.41L254.51 377.05L251.95 374.59L249.49 372.03L247.13 369.38L244.87 366.64L242.71 363.82L240.66 360.91L238.72 357.91L236.9 354.85L235.19 351.7L233.6 348.49L232.13 345.2L230.79 341.85L229.58 338.44L228.5 334.97L227.55 331.44L226.74 327.86L226.08 324.22L225.55 320.54L225.17 316.81L224.94 313.05L224.86 309.24L224.94 305.43L225.17 301.66L225.55 297.93L226.08 294.25L226.74 290.62L227.55 287.04L228.5 283.51L229.58 280.03L230.79 276.62L232.13 273.27L233.6 269.99L235.19 266.77L236.9 263.63L238.72 260.56L240.66 257.57L242.71 254.66L244.87 251.83L247.13 249.1L249.49 246.45L251.95 243.89L254.51 241.43L257.16 239.06L259.9 236.8L262.72 234.65L265.63 232.6L268.62 230.66L271.69 228.83L274.84 227.13L278.05 225.54L281.34 224.07L284.68 222.73L288.1 221.52L291.57 220.44L295.1 219.49L298.68 218.68L302.32 218.01L306 217.49L309.72 217.11L313.49 216.88L317.3 216.8L321.11 216.88L324.88 217.11L324.88 217.11L328.61 217.49ZM276.96 254.52L275.71 254.76L274.48 255.08L273.28 255.45L272.1 255.89L270.95 256.39L269.83 256.95L268.74 257.57L267.69 258.24L266.66 258.96L265.68 259.74L264.73 260.56L263.83 261.44L262.96 262.36L262.14 263.32L261.37 264.33L260.64 265.38L259.96 266.46L259.33 267.59L258.75 268.74L258.22 269.94L257.75 271.16L257.34 272.41L256.99 273.69L256.69 275L256.46 276.33L256.3 277.69L256.19 279.06L256.16 280.46L256.19 281.85L256.3 283.23L256.46 284.58L256.69 285.91L256.99 287.22L257.34 288.5L257.75 289.75L258.22 290.98L258.75 292.17L259.33 293.33L259.96 294.45L260.64 295.54L261.37 296.59L262.14 297.59L262.96 298.56L263.83 299.48L264.73 300.35L265.68 301.18L266.66 301.95L267.69 302.68L268.74 303.35L269.83 303.96L270.95 304.52L272.1 305.02L273.28 305.46L274.48 305.84L275.71 306.15L276.96 306.39L278.23 306.57L279.53 306.68L280.84 306.72L282.15 306.68L283.44 306.57L284.71 306.39L285.96 306.15L287.19 305.84L288.39 305.46L289.57 305.02L290.72 304.52L291.84 303.96L292.93 303.35L293.99 302.68L295.01 301.95L295.99 301.18L296.94 300.35L297.84 299.48L298.71 298.56L299.53 297.59L300.3 296.59L301.03 295.54L301.71 294.45L302.34 293.33L302.92 292.17L303.45 290.98L303.92 289.75L304.33 288.5L304.68 287.22L304.98 285.91L305.21 284.58L305.38 283.23L305.48 281.85L305.51 280.46L305.48 279.06L305.38 277.69L305.21 276.33L304.98 275L304.68 273.69L304.33 272.41L303.92 271.16L303.45 269.94L302.92 268.74L302.34 267.59L301.71 266.46L301.03 265.38L300.3 264.33L299.53 263.32L298.71 262.36L297.84 261.44L296.94 260.56L295.99 259.74L295.01 258.96L293.99 258.24L292.93 257.57L291.84 256.95L290.72 256.39L289.57 255.89L288.39 255.45L287.19 255.08L285.96 254.76L284.71 254.52L283.44 254.34L282.15 254.23L280.84 254.2L279.53 254.23L278.23 254.34L278.23 254.34L276.96 254.52Z"/> </symbol> <symbol id="icon-svg-eye-slash" viewBox="0 0 640 640"> <path fill="currentColor" d="M99.78 273.04L92.76 281.36L86.07 289.95L79.71 298.78L73.7 307.87L72.87 309.24L2.52 309.24L5.88 302.25L10.81 292.74L16.03 283.41L21.51 274.25L27.27 265.27L33.29 256.49L39.56 247.89L46.08 239.5L52.85 231.31L59.86 223.34L64.62 218.24L109.55 262.51L107.11 264.99L107.11 264.99L99.78 273.04ZM360.76 110.57L374.55 112.56L388.17 115.08L401.59 118.14L414.82 121.72L427.83 125.81L440.61 130.39L453.16 135.46L465.47 141.01L477.51 147.02L489.29 153.48L500.78 160.38L511.99 167.71L522.89 175.45L533.48 183.61L543.75 192.16L553.67 201.09L563.26 210.4L572.48 220.07L581.33 230.09L589.8 240.45L597.88 251.13L605.56 262.14L612.82 273.45L619.66 285.05L626.06 296.93L632.01 309.09L632.08 309.24L562.11 309.24L561.28 307.87L555.27 298.78L548.91 289.95L542.22 281.36L535.2 273.04L527.87 264.99L520.24 257.23L512.3 249.75L504.08 242.57L495.58 235.7L486.81 229.15L477.79 222.93L468.51 217.04L458.99 211.5L449.24 206.31L439.26 201.48L429.07 197.03L418.68 192.96L408.09 189.28L397.32 185.99L386.37 183.12L375.26 180.66L363.98 178.63L352.56 177.03L341 175.88L329.3 175.19L317.49 174.95L305.68 175.19L293.98 175.88L282.42 177.03L271 178.63L259.72 180.66L248.61 183.12L237.66 185.99L226.88 189.28L216.3 192.96L205.91 197.03L195.72 201.48L194.86 201.9L146.16 153.91L151.08 151.1L160.51 146.09L170.1 141.36L179.85 136.91L189.76 132.77L199.81 128.92L210 125.38L220.32 122.15L230.78 119.23L241.36 116.64L252.06 114.38L262.87 112.44L273.79 110.85L284.8 109.6L295.92 108.7L307.12 108.16L318.41 107.98L332.67 108.27L346.79 109.14L346.79 109.14L360.76 110.57Z"/> <path fill="currentColor" d="M22.7 107.34L72.49 56.79L583.44 560.18L533.65 610.73L22.7 107.34Z"/> <path fill="currentColor" d="M324.88 217.11L328.61 217.49L332.29 218.01L335.92 218.68L339.5 219.49L343.03 220.44L346.51 221.52L349.92 222.73L353.27 224.07L356.55 225.54L359.77 227.13L362.91 228.83L365.98 230.66L368.97 232.6L371.88 234.65L374.71 236.8L377.44 239.06L380.09 241.43L382.65 243.89L385.11 246.45L387.48 249.1L389.74 251.83L391.89 254.66L393.94 257.57L395.88 260.56L397.71 263.63L399.41 266.77L401 269.99L402.47 273.27L403.81 276.62L405.02 280.03L406.1 283.51L407.05 287.04L407.86 290.62L408.53 294.25L409.05 297.93L409.43 301.66L409.66 305.43L409.74 309.24L409.66 313.05L409.43 316.81L409.05 320.54L408.53 324.22L407.86 327.86L407.05 331.44L406.1 334.97L405.02 338.44L403.81 341.85L402.47 345.2L401 348.49L399.41 351.7L397.71 354.85L395.88 357.91L393.94 360.91L391.89 363.82L389.74 366.64L388.51 368.13L304.99 285.85L305.21 284.58L305.38 283.23L305.48 281.85L305.51 280.46L305.48 279.06L305.38 277.69L305.21 276.33L304.98 275L304.68 273.69L304.33 272.41L303.92 271.16L303.45 269.94L302.92 268.74L302.35 267.59L301.71 266.46L301.03 265.38L300.3 264.33L299.53 263.32L298.71 262.36L297.84 261.44L296.94 260.56L295.99 259.74L295.01 258.96L293.99 258.24L292.93 257.57L291.84 256.95L290.72 256.39L289.57 255.89L288.39 255.45L287.19 255.08L285.96 254.76L284.71 254.52L283.44 254.34L282.15 254.23L280.84 254.2L279.53 254.23L278.23 254.34L276.96 254.52L275.71 254.76L274.48 255.08L273.93 255.25L257.35 238.91L259.9 236.8L262.72 234.65L265.63 232.6L268.63 230.66L271.69 228.83L274.84 227.13L278.05 225.54L281.34 224.07L284.69 222.73L288.1 221.52L291.57 220.44L295.1 219.49L298.68 218.68L302.32 218.01L306 217.49L309.73 217.11L313.49 216.88L317.3 216.8L321.11 216.88L324.88 217.11Z"/> <path fill="currentColor" d="M79.71 316.34L86.07 325.18L92.76 333.77L99.78 342.09L107.11 350.14L114.74 357.9L122.68 365.38L130.9 372.56L139.4 379.42L148.17 385.98L157.19 392.2L166.47 398.09L175.99 403.63L185.74 408.82L195.72 413.64L205.91 418.1L216.3 422.17L226.89 425.85L237.66 429.14L248.61 432.01L259.72 434.47L271 436.5L282.42 438.09L288.38 438.69L355.76 505.07L346.79 505.99L332.67 506.86L318.41 507.15L307.12 506.97L295.92 506.43L284.81 505.53L273.79 504.28L262.87 502.69L252.06 500.75L241.36 498.49L230.78 495.9L220.32 492.98L210 489.75L199.81 486.21L189.76 482.36L179.85 478.21L170.1 473.77L160.51 469.04L151.08 464.03L141.82 458.74L132.74 453.18L123.84 447.35L115.13 441.26L106.61 434.91L98.28 428.32L90.17 421.48L82.26 414.4L74.57 407.09L67.1 399.55L59.86 391.79L52.85 383.81L46.08 375.63L39.56 367.23L33.29 358.64L27.27 349.86L21.51 340.88L16.03 331.72L10.82 322.39L5.88 312.88L2.52 305.89L72.87 305.89L73.7 307.26L79.71 316.34ZM626.06 318.2L619.66 330.08L612.82 341.68L605.56 352.99L597.88 363.99L589.8 374.68L581.33 385.04L572.48 395.06L563.26 404.73L553.68 414.04L543.75 422.97L533.48 431.52L522.89 439.68L511.99 447.42L500.79 454.75L489.29 461.65L477.51 468.11L469.25 472.23L418.5 422.23L418.68 422.17L429.07 418.1L439.26 413.64L449.24 408.82L458.99 403.63L468.51 398.09L477.79 392.2L486.81 385.98L495.58 379.42L504.08 372.56L512.3 365.38L520.24 357.9L527.87 350.14L535.2 342.09L542.22 333.77L548.91 325.18L555.27 316.34L561.28 307.26L562.11 305.89L632.08 305.89L632.02 306.04L626.06 318.2Z"/> </symbol> <symbol id="icon-svg-open" viewBox="0 0 640 640"> <path fill="currentColor" d="M523.68 128.96L525.44 129L527.18 129.11L528.91 129.28L530.61 129.52L532.29 129.83L533.95 130.21L535.58 130.64L537.18 131.14L538.76 131.7L540.31 132.32L541.83 133L543.31 133.73L544.77 134.52L546.19 135.37L547.57 136.26L548.91 137.21L550.22 138.21L551.49 139.25L552.71 140.34L553.89 141.48L555.03 142.66L556.12 143.89L557.17 145.15L558.16 146.46L559.11 147.8L560 149.19L560.85 150.6L561.64 152.06L562.37 153.54L563.05 155.06L563.67 156.61L564.23 158.19L564.73 159.79L565.16 161.42L565.54 163.08L565.85 164.76L566.09 166.46L566.26 168.19L566.37 169.93L566.41 171.69L566.41 215.23L88.61 215.23L4.53 539.09L3.93 537.88L3.27 536.4L2.67 534.89L2.12 533.36L1.64 531.79L1.21 530.2L0.85 528.59L0.54 526.95L0.31 525.29L0.14 523.61L0.03 521.91L0 520.2L0 110.77L0.01 110.06L0.02 109.34L0.05 108.63L0.09 107.92L0.14 107.22L0.2 106.51L0.27 105.81L0.35 105.1L0.44 104.4L0.55 103.7L0.66 103L0.79 102.31L0.92 101.62L1.07 100.93L1.22 100.24L1.39 99.55L1.57 98.87L1.76 98.19L1.96 97.52L2.16 96.84L2.38 96.17L2.61 95.51L2.85 94.84L3.1 94.18L3.36 93.53L3.63 92.88L3.91 92.23L4.2 91.58L4.5 90.95L4.81 90.31L5.13 89.68L5.46 89.05L5.8 88.43L6.15 87.82L6.51 87.21L6.88 86.6L7.26 86L7.65 85.4L8.05 84.81L8.45 84.23L8.84 83.69L9.25 83.17L9.66 82.65L10.08 82.15L10.52 81.66L10.96 81.18L11.42 80.71L11.89 80.26L12.36 79.81L12.85 79.38L13.35 78.96L13.85 78.56L14.37 78.16L14.89 77.78L15.42 77.41L15.96 77.06L16.51 76.71L17.06 76.38L17.62 76.07L18.19 75.76L18.77 75.47L19.35 75.2L19.94 74.94L20.54 74.69L21.14 74.45L21.75 74.23L22.37 74.03L22.98 73.84L23.61 73.66L24.24 73.5L24.87 73.35L25.51 73.22L26.15 73.1L26.79 73L27.44 72.91L28.1 72.84L28.75 72.79L29.41 72.75L30.07 72.72L30.73 72.71L218.96 72.71L312.71 128.96L523.68 128.96Z"/> <path fill="currentColor" d="M560.06 561.83L640 250.89L114.22 250.89L33.49 561.83L560.06 561.83Z"/> </symbol> <symbol id="icon-svg-download" viewBox="0 0 640 640"> <path fill="currentColor" d="M588.28 540.74C602.35 540.74 613.75 552.14 613.75 566.21C613.75 579.71 613.75 593.41 613.75 606.58C613.75 621.56 601.61 633.71 586.62 633.71C474.55 633.71 164.57 633.71 52.27 633.71C37.9 633.71 26.25 622.06 26.25 607.69C26.25 594.3 26.25 580.59 26.25 567.31C26.25 552.63 38.15 540.74 52.82 540.74C165.01 540.74 475.88 540.74 588.28 540.74Z"/> <path fill="currentColor" d="M504.59 321.99L379.59 321.99L379.59 7.14L246.77 7.14L246.77 318.86L110.84 318.86L316.88 497.77L504.59 321.99Z"/> </symbol> </svg> <div class="editor"> <div class="tool-buttons"> <button class="button" data-role="play" data-title-ru="Предпросмотр анимации" data-title-en="Preview animation"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-play"></use> </svg> <kbd>F9</kbd> </button> <div class="tools-separator"></div> <button class="button" data-role="pencil" data-title-ru="Карандаш" data-title-en="Pencil"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-pencil"></use> </svg> <kbd>B</kbd> </button> <button class="button" data-role="line" data-title-ru="Нарисовать линию" data-title-en="Draw line"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon" viewBox="0 0 20 20"> <line x1="3" x2="17" y1="17" y2="3" stroke-width="2" stroke="currentColor"/> </svg> <kbd>N</kbd> </button> <button class="button" data-role="ellipse" data-title-ru="Нарисовать эллипс" data-title-en="Draw ellipse"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-ellipse"></use> </svg> <kbd>O</kbd> </button> <button class="button" data-role="eraser" data-title-ru="Стирка" data-title-en="Eraser"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-eraser"></use> </svg> <kbd>E</kbd> </button> <button class="button" data-role="fill" data-title-ru="Заливка цветом" data-title-en="Flood fill"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-fill"></use> </svg> <kbd>K</kbd> </button> <button class="button" data-role="pick-color" data-title-ru="Взять цвет из точки" data-title-en="Pick color from point"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-pick-color"></use> </svg> <kbd>I</kbd> </button> <div class="free-space"></div> <button class="button" data-role="delete" data-title-ru="Удалить все" data-title-en="Delete all"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-trash"></use> </svg> </button> </div> <div class="tool-buttons"> <button class="button" data-role="rect" data-title-ru="Прямоугольное выделение" data-title-en="Rectangular selection"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-rect"></use> </svg> <kbd>R</kbd> </button> <button class="button" data-role="move" data-title-ru="Переместить выделение или слой" data-title-en="Move selection or layer"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-move"></use> </svg> <kbd>T</kbd> </button> <div class="tools-separator"></div> <button class="button" data-role="copy" data-title-ru="Копировать в буфер" data-title-en="Copy into the buffer"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon" viewBox="0 0 100.56 122.88"> <path d="M72.15,112.2L90.4,93H72.15V112.2L72.15,112.2z M81.75,9.2c0,1.69-1.37,3.05-3.05,3.05c-1.69,0-3.05-1.37-3.05-3.05V6.11 H6.11v92.24h3.01c1.69,0,3.05,1.37,3.05,3.05c0,1.69-1.37,3.05-3.05,3.05H5.48c-1.51,0-2.88-0.61-3.87-1.61l0.01-0.01 c-1-1-1.61-2.37-1.61-3.87V5.48C0,3.97,0.61,2.6,1.61,1.61C2.6,0.61,3.97,0,5.48,0h70.79c1.5,0,2.87,0.62,3.86,1.61l0,0l0.01,0.01 c0.99,0.99,1.61,2.36,1.61,3.86V9.2L81.75,9.2z M100.56,90.55c0,1.4-0.94,2.58-2.22,2.94l-26.88,28.27 c-0.56,0.68-1.41,1.11-2.36,1.11c-0.06,0-0.12,0-0.19-0.01c-0.06,0-0.12,0.01-0.18,0.01H24.29c-1.51,0-2.88-0.61-3.87-1.61 l0.01-0.01l-0.01-0.01c-0.99-0.99-1.61-2.36-1.61-3.86v-93.5c0-1.51,0.62-2.88,1.61-3.87l0.01,0.01c1-0.99,2.37-1.61,3.86-1.61 h70.79c1.5,0,2.87,0.62,3.86,1.61l0,0l0.01,0.01c0.99,0.99,1.61,2.36,1.61,3.86V90.55L100.56,90.55z M94.45,86.9V24.54H24.92v92.24 h41.13V89.95c0-1.69,1.37-3.05,3.05-3.05H94.45L94.45,86.9z" fill="currentColor"/> </svg> </button> <button class="button" data-role="cut" data-title-ru="Вырезать в буфер" data-title-en="Cut into the buffer"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon" viewBox="0 0 24 24"> <path d="M0 0h24v24H0V0z" fill="none"/> <path fill="currentColor" d="M9.64 7.64c.29-.62.42-1.33.34-2.09-.19-1.73-1.54-3.2-3.26-3.49-2.77-.48-5.14 1.89-4.66 4.65.3 1.72 1.76 3.07 3.49 3.26.76.08 1.46-.05 2.09-.34L10 12l-2.36 2.36c-.62-.29-1.33-.42-2.09-.34-1.73.19-3.2 1.54-3.49 3.26-.48 2.77 1.89 5.13 4.65 4.65 1.72-.3 3.07-1.76 3.26-3.49.08-.76-.05-1.46-.34-2.09L12 14l7.59 7.59c.89.89 2.41.26 2.41-1v-.01c0-.37-.15-.73-.41-1L9.64 7.64zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zm7.59-10.09L13 9l2 2 6.59-6.59c.26-.26.41-.62.41-1V3.4c0-1.25-1.52-1.88-2.41-.99z"/> </svg> </button> <button class="button" data-role="paste" data-title-ru="Вставить из буфера" data-title-en="Paste from buffer"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon" viewBox="0 0 32 32"> <path fill="currentColor" d="m14.6569,0.10158c-1.47681,0 -2.52708,1.0457 -3.04535,2.34822l-8.69575,0l0,27.00453l9.39288,0l0,2.34822l16.43754,0l0,-18.78576l-2.34822,0l0,-10.56699l-8.69575,0c-0.51826,-1.30252 -1.56854,-2.34822 -3.04535,-2.34822zm0,2.34822c0.65127,0 1.17411,0.52284 1.17411,1.17411l0,1.17411l3.52233,0l0,2.34822l-9.39288,0l0,-2.34822l3.52233,0l0,-1.17411c0,-0.65127 0.52284,-1.17411 1.17411,-1.17411zm-9.39288,2.34822l2.34822,0l0,4.69644l14.08932,0l0,-4.69644l2.34822,0l0,8.21877l-11.7411,0l0,14.08932l-7.04466,0l0,-22.30809zm9.39288,10.56699l11.7411,0l0,14.08932l-11.7411,0l0,-14.08932z"/> </svg> </button> <div class="tools-separator"></div> <button class="button" data-role="hand" data-title-ru="Переместить холст" data-title-en="Move canvas"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-hand"></use> </svg> <kbd>SPACE</kbd> </button> <div class="free-space"></div> <button class="button" data-role="undo" data-title-ru="Отменить действие" data-title-en="Undo action"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon" viewBox="0 0 24 24"> <path fill="currentColor" d="M13.5,7A6.5,6.5 0 0,1 20,13.5A6.5,6.5 0 0,1 13.5,20H10V18H13.5C16,18 18,16 18,13.5C18,11 16,9 13.5,9H7.83L10.91,12.09L9.5,13.5L4,8L9.5,2.5L10.92,3.91L7.83,7H13.5M6,18H8V20H6V18Z"/> </svg> </button> <button class="button" data-role="redo" data-title-ru="Восстановить действие" data-title-en="Redo action"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon" viewBox="0 0 24 24"> <path fill="currentColor" d="M10.5,7A6.5,6.5 0 0,0 4,13.5A6.5,6.5 0 0,0 10.5,20H14V18H10.5C8,18 6,16 6,13.5C6,11 8,9 10.5,9H16.17L13.09,12.09L14.5,13.5L20,8L14.5,2.5L13.08,3.91L16.17,7H10.5M18,18H16V20H18V18Z"/> </svg> </button> </div> <div class="tool-buttons"> <button class="button" data-role="color" data-title-ru="Выбрать цвет" data-title-en="Pick color"> <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"> <rect x="1.5" y="1.5" width="19" height="19" stroke="#ffffff" stroke-width="1" shape-rendering="crispEdges" fill="none"/> <rect x="3" y="3" width="16" height="16" fill="#ffffff"/> </svg> <kbd>C</kbd> </button> <div class="tools-separator"></div> <button class="button" data-role="size" data-size="1" data-title-ru="Размер кисти 1" data-title-en="Brush size 1"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon" viewBox="0 0 18 18"> <rect x="8" y="8" width="4" height="4" fill="currentColor"/> </svg> <kbd>1</kbd> </button> <button class="button" data-role="size" data-size="2" data-title-ru="Размер кисти 2" data-title-en="Brush size 2"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon" viewBox="0 0 18 18"> <rect x="6" y="6" width="8" height="8" fill="currentColor"/> </svg> <kbd>2</kbd> </button> <button class="button" data-role="size" data-size="3" data-title-ru="Размер кисти 3" data-title-en="Brush size 3"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon" viewBox="0 0 18 18"> <rect x="4" y="4" width="12" height="12" fill="currentColor"/> </svg> <kbd>3</kbd> </button> <button class="button" data-role="size" data-size="4" data-title-ru="Размер кисти 4" data-title-en="Brush size 4"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon" viewBox="0 0 18 18"> <rect x="1" y="1" width="16" height="16" fill="currentColor"/> </svg> <kbd>4</kbd> </button> <div class="tools-separator"></div> <button class="button" data-role="flip-x" data-title-ru="Отразить горизонтально" data-title-en="Flip horizonal"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-flip-h"></use> </svg> </button> <button class="button" data-role="flip-y" data-title-ru="Отразить вертикально" data-title-en="Flip vertical"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-flip-v"></use> </svg> </button> <div class="free-space"></div> <button class="button" data-role="zoom-in" data-title-ru="Приблизить холст" data-title-en="Zoom in canvas"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon" viewBox="0 0 64 64"> <path fill="none" stroke="currentColor" stroke-opacity="1" stroke-width="5" stroke-dasharray="none" d="M6.081632672942237,26.49781361105164 C6.081632672942237,14.778421761007806 15.3535794343025,5.285714362472299 26.80042728783369,5.285714362472299 C38.24727514136488,5.285714362472299 47.519221902725135,14.778421761007806 47.519221902725135,26.49781361105164 C47.519221902725135,38.217205461095475 38.24727514136488,47.70991285963098 26.80042728783369,47.70991285963098 C15.3535794343025,47.70991285963098 6.081632672942237,38.217205461095475 6.081632672942237,26.49781361105164 z"/> <path fill="currentColor" fill-opacity="1" stroke="none" stroke-width="5" stroke-dasharray="none" d="M47.57201,46.8569C47.57201,39.78653 49.67081,41.07243 52.84861,41.07243C56.0264,41.07243 57.82607,38.87931 57.82607,45.94969C57.82607,53.02006 55.99412,65.3688 52.81633,65.3688C49.63853,65.3688 47.57201,53.92728 47.57201,46.8569z" transform="rotate(-43.57558822631836 52.81632614135741,52.57143020629882) "/> <path d="m16.49968,23.41699l6.78962,0l0,-6.78962l6.96486,0l0,6.78962l6.78962,0l0,6.96487l-6.78962,0l0,6.78962l-6.96486,0l0,-6.78962l-6.78962,0l0,-6.96487z" fill="currentColor"/> </svg> </button> <button class="button" data-role="zoom-out" data-title-ru="Отдалить холст" data-title-en="Zoom out canvas"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon" viewBox="0 0 64 64"> <path fill="none" stroke="currentColor" stroke-opacity="1" stroke-width="5" stroke-dasharray="none" d="M6.081632672942237,26.49781361105164 C6.081632672942237,14.778421761007806 15.3535794343025,5.285714362472299 26.80042728783369,5.285714362472299 C38.24727514136488,5.285714362472299 47.519221902725135,14.778421761007806 47.519221902725135,26.49781361105164 C47.519221902725135,38.217205461095475 38.24727514136488,47.70991285963098 26.80042728783369,47.70991285963098 C15.3535794343025,47.70991285963098 6.081632672942237,38.217205461095475 6.081632672942237,26.49781361105164 z"/> <path fill="currentColor" fill-opacity="1" stroke="none" stroke-width="5" stroke-dasharray="none" d="M47.57201,46.8569C47.57201,39.78653 49.67081,41.07243 52.84861,41.07243C56.0264,41.07243 57.82607,38.87931 57.82607,45.94969C57.82607,53.02006 55.99412,65.3688 52.81633,65.3688C49.63853,65.3688 47.57201,53.92728 47.57201,46.8569z" transform="rotate(-43.57558822631836 52.81632614135741,52.57143020629882) "/> <rect height="6.5627" width="20.82945" y="23.58262" x="16.30658" fill="currentColor"/> </svg> </button> </div> <div class="colors-popup" hidden> <div class="colors-bar"></div> </div> <div class="canvas-container"> </div> <div class="tool-buttons"> <button class="button" data-role="add-layer" data-title-ru="Добавить новый слой" data-title-en="Add new layer"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-add-layer"></use> </svg> </button> <button class="button" data-role="remove-layer" data-title-ru="Удалить выделенный слой" data-title-en="Remove selected layer"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-delete-layer"></use> </svg> </button> <button class="button" data-role="merge-layer" data-title-ru="Объединить выделенный слой со слоем под ним" data-title-en="Merge selected layer with layer under"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-merge-layers"></use> </svg> </button> <button class="button" data-role="copy-layer" data-title-ru="Дублировать выделенный слой" data-title-en="Duplicate selected layer"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-copy-layer"></use> </svg> </button> <div class="tools-separator"></div> <button class="button" data-role="clear-frame" data-title-ru="Создать пустой ключевой кадр" data-title-en="Create blank keyframe"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-blank-key"></use> </svg> <kbd>F7</kbd> </button> <button class="button" data-role="insert-frame" data-title-ru="Вставить кадр (сместить следующие кадры вправо)" data-title-en="Insert frame (shift next frames to the right)"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-insert-frame"></use> </svg> <kbd>F5</kbd> </button> <button class="button" data-role="remove-frame" data-title-ru="Удалить кадр (сместить следующие кадры влево)" data-title-en="Remove frame (shift next frames to the left)"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-delete-frame"></use> </svg> <kbd>F8</kbd> </button> </div> <div class="layers-header"> <div class="layers-header-frames" draggable="false"></div> </div> <div class="layers-list"> </div> <div class="tool-buttons tool-buttons-bottom"> <button class="button" data-role="download"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-download"></use> </svg> <span lang="ru">Сохранить файл</span> <span lang="en">Save file</span> </button> <button class="button" data-role="open"> <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon"> <use href="#icon-svg-open"></use> </svg> <span lang="ru">Открыть файл</span> <span lang="en">Open file</span> </button> </div> <div class="preview-popup" hidden> <div class="preview-popup-body"> <div class="preview"> <img src="./assets/screen.png" width="252" height="404" alt=""/> <canvas></canvas> </div> </div> </div> </div>',document.querySelectorAll("[data-title-ru]").forEach((function(t){t.title=t.getAttribute("data-title-".concat(globalThis.floor796.detectUserLanguage()))})),iu(this,lu,new aa),iu(this,su,new Ne(ou(this,lu))),iu(this,uu,new d),iu(this,cu,new P),iu(this,mu,new jt(ou(this,lu),ou(this,su),ou(this,uu).colors)),iu(this,vu,new ls(ou(this,mu))),iu(this,fu,new Zt(ou(this,mu))),ou(this,fu).bindTool("hand",new tr(ou(this,mu))),ou(this,fu).bindTool("pencil",new wr(ou(this,mu),ou(this,uu),ou(this,cu))),ou(this,fu).bindTool("line",new cn(ou(this,mu),ou(this,uu),ou(this,cu))),ou(this,fu).bindTool("ellipse",new An(ou(this,mu),ou(this,uu),ou(this,cu))),ou(this,fu).bindTool("eraser",new Ur(ou(this,mu),ou(this,cu))),ou(this,fu).bindTool("fill",new Vn(ou(this,mu),ou(this,uu))),ou(this,fu).bindTool("rect",new zo(ou(this,mu))),ou(this,fu).bindTool("move",new vo(ou(this,mu))),ou(this,fu).bindTool("pick-color",new vl(ou(this,mu),ou(this,uu))),ou(this,fu).setTool("pencil"),iu(this,du,new Zs(ou(this,mu))),iu(this,yu,new Ni(ou(this,mu),ou(this,fu))),iu(this,hu,new $o(ou(this,mu),ou(this,fu))),iu(this,Lu,new Ja(ou(this,lu),ou(this,mu),ou(this,yu),ou(this,fu))),iu(this,pu,new xs(ou(this,mu),ou(this,yu),ou(this,fu),ou(this,Lu))),window.onresize=this.updateSize.bind(this),document.querySelector('.button[data-role="delete"]').onclick=function(){return n.resetAll()},this.updateSize(),""===o?ou(this,Lu).restoreFromLocalStorage().then():ou(this,pu).loadByUrl(o).then(),function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(this,bu,gu).call(this)}var r,n,o;return r=e,n=[{key:"canvas",get:function(){return ou(this,mu)}},{key:"updateSize",value:function(){ou(this,mu).resizeToContainer(),ou(this,mu).render()}},{key:"resetAll",value:function(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){var t="ru"===floor796.detectUserLanguage()?"Вы действительно хотите удалить текущую анимацию?":"Do you really want to delete the current animation?";if(!confirm(t))return}ou(this,mu).reset(),ou(this,yu).build(),ou(this,fu).sync(),ou(this,Lu).reset(),ou(this,fu).setTool("pencil")}},{key:"getFile",value:function(){return(t=t||(e=Qs().mark((function t(){return Qs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new Ea).packToFinalFile(this.canvas);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){tu(i,n,o,a,l,"next",t)}function l(t){tu(i,n,o,a,l,"throw",t)}a(void 0)}))})).apply(this,arguments);var e}}],n&&eu(r.prototype,n),o&&eu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function gu(){var t,e=this,r={};document.addEventListener("keydown",(function(n){if(!n.target||"INPUT"!==n.target.tagName){switch(n.code){case"ArrowRight":case"Period":ou(e,yu).selectNextFrame();break;case"ArrowLeft":case"Comma":ou(e,yu).selectPrevFrame();break;case"KeyB":ou(e,fu).setTool("pencil");break;case"KeyE":ou(e,fu).setTool("eraser");break;case"KeyR":ou(e,fu).setTool("rect");break;case"KeyN":ou(e,fu).setTool("line");break;case"KeyO":ou(e,fu).setTool("ellipse");break;case"KeyI":ou(e,fu).setTool("pick-color");break;case"KeyT":ou(e,fu).setTool("move");break;case"KeyK":ou(e,fu).setTool("fill");break;case"KeyC":n.ctrlKey||n.metaKey?ou(e,hu).copy():ou(e,uu).showColorsPalette();break;case"KeyX":(n.ctrlKey||n.metaKey)&&ou(e,hu).cut();break;case"KeyV":(n.ctrlKey||n.metaKey)&&ou(e,hu).paste();break;case"KeyZ":(n.ctrlKey||n.metaKey)&&(n.shiftKey?ou(e,Lu).redo():ou(e,Lu).undo());break;case"KeyA":(n.ctrlKey||n.metaKey)&&(n.preventDefault(),n.stopPropagation(),ou(e,mu).setSelection(0,0,_,A));break;case"Space":n.preventDefault(),r[n.code]||(t=ou(e,fu).getTool(),ou(e,fu).setTool("hand"));break;case"Delete":var o;if(null!==ou(e,mu).getSelection())(o=ou(e,mu).layers.currentLayer).clearRect.apply(o,[ou(e,mu).layers.currentFrame].concat(Vs(ou(e,mu).getSelection()))),ou(e,mu).render(),ou(e,lu).commit();break;case"Digit1":ou(e,cu).setSize(1);break;case"Digit2":ou(e,cu).setSize(2);break;case"Digit3":ou(e,cu).setSize(3);break;case"Digit4":ou(e,cu).setSize(4);break;case"F9":ou(e,vu).play();break;case"F5":n.preventDefault(),ou(e,yu).insertFrame();break;case"F7":n.preventDefault(),ou(e,yu).makeBlankFrame();break;case"F8":n.preventDefault(),ou(e,yu).removeFrame();break;case"Escape":ou(e,vu).closePopup(),ou(e,uu).closeColorsPalette(),null!==ou(e,mu).getSelection()&&(ou(e,mu).layers.commitTransactions(),ou(e,mu).setSelection(0,0,0,0))}r[n.code]=!0}})),document.addEventListener("keyup",(function(n){if(!n.target||"INPUT"!==n.target.tagName){if("Space"===n.code)t&&ou(e,fu).setTool(t);delete r[n.code]}}))}"floor796"in globalThis||(globalThis.floor796={detectUserLanguage:function(){return/[?&]lang=ru\b/.test(location.search)?"ru":"en"}}),globalThis.funDrawing={AnimationEditor:wu,AnimationPlayer:Bl,AnimationFile:Ea,ColorsBar:d,LS_KEY:U}})();